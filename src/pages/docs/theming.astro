---
import DocsLayout from '../../layouts/DocsLayout.astro';
import ThemeSwitcher from '../../components/ThemeSwitcher.astro';
import ThemeIcon from '../../components/ThemeIcon.astro';
import Card from '../../components/Card.astro';
import CodeBlock from '../../components/CodeBlock.astro';
import { THEMES_DARK, THEMES_LIGHT } from '../../config/themes';

const themeCardContent: Record<string, { description: string; author: string }> = {
  'github-dark-classic': { description: 'Official GitHub dark theme for VS Code', author: 'Primer (GitHub)' },
  'shades-of-purple': { description: 'Professional theme with bold purple shades', author: 'Ahmad Awais' },
  'sandstorm-classic': { description: 'Dark, red-based theme for late-night coding', author: 'Devan Sisson' },
  'rocky-blood-orange': { description: 'Dark theme with blood-orange accent', author: 'Luca Heyworth' },
  'minimal-dark-neon-yellow': { description: 'Minimal dark theme with neon yellow accent', author: 'Gabriel D Sanchez' },
  'hack-the-box': { description: 'Dark blue with lime green accent, built for hackers', author: 'silofy' },
  'pink-cat-boo': { description: 'Sweet and cute dark theme with rose pink accents', author: 'Fiona Fan' },
  'github-light': { description: 'Official GitHub light theme for VS Code', author: 'Primer (GitHub)' },
  'red-velvet-cupcake': { description: 'Velvet-cupcake light theme with red accent', author: 'Fahad Ashraf Chaudhry' },
  'orangy-one-light': { description: 'Light theme with orange accent', author: 'maher-cshub' },
  'sunflower': { description: 'Yellow light theme', author: 'Hashirama Naiff' },
  'green-breeze-light': { description: 'Green and blue focused light theme with good contrast', author: 'icy9ptcl' },
  'cute-pink': { description: 'Cute pink light theme for VSCode', author: 'WebFreak' },
  'semi-light-purple': { description: 'Light aesthetic theme with soft purple tones', author: 'Kapil Yadav' },
};
---

<DocsLayout title="Theming System" description="Theme system, custom themes, and color format guide" class="theming-page">
	<section>
		<h2>Available Themes</h2>
		<p>Rizzo CSS includes 14 carefully crafted themes organized into light and dark categories. Each theme has its own dedicated page with detailed information, color palettes, and usage examples. Click on any theme card below to learn more about it.</p>
		
		<div class="example">
			<div class="example-title">Try Themes</div>
			<ThemeSwitcher />
		</div>
	</section>
	
	<section>
		<h2>Dark Themes</h2>
		<div class="theming-page__grid">
			{THEMES_DARK.map((theme) => {
				const content = themeCardContent[theme.value];
				return (
					<Card variant="elevated">
						<div class="card__body">
							<div class="theming-page__card-header">
								<ThemeIcon themeId={theme.value} size={24} />
								<h3 style="margin: 0;"><a href={`/docs/themes/${theme.value}`}>{theme.label}</a></h3>
							</div>
							{content && <p class="theming-page__card-desc">{content.description}</p>}
							{content && <p class="theming-page__card-meta"><strong>Author:</strong> {content.author}</p>}
							<p class="theming-page__card-meta"><code>{theme.value}</code></p>
						</div>
					</Card>
				);
			})}
		</div>
	</section>

	<section>
		<h2>Light Themes</h2>
		<div class="theming-page__grid">
			{THEMES_LIGHT.map((theme) => {
				const content = themeCardContent[theme.value];
				return (
					<Card variant="elevated">
						<div class="card__body">
							<div class="theming-page__card-header">
								<ThemeIcon themeId={theme.value} size={24} />
								<h3 style="margin: 0;"><a href={`/docs/themes/${theme.value}`}>{theme.label}</a></h3>
							</div>
							{content && <p class="theming-page__card-desc">{content.description}</p>}
							{content && <p class="theming-page__card-meta"><strong>Author:</strong> {content.author}</p>}
							<p class="theming-page__card-meta"><code>{theme.value}</code></p>
						</div>
					</Card>
				);
			})}
		</div>
	</section>
	
	<section>
		<h2>Using Themes</h2>
		
		<h3>Setting Theme</h3>
		<p>Set the theme via the <code>data-theme</code> attribute on the HTML element:</p>
		<CodeBlock code={`<html lang="en" data-theme="github-dark-classic">`} language="html" />
		
		<h3>Programmatic Theme Switching</h3>
		<p>The <code>ThemeSwitcher</code> component handles theme switching automatically. It:</p>
		<ul>
			<li>Updates the <code>data-theme</code> attribute</li>
			<li>Persists choice in <code>localStorage</code></li>
			<li>Updates all components instantly</li>
		</ul>
		
		<h3>Manual Theme Switching</h3>
		<CodeBlock code={`// Set theme
document.documentElement.setAttribute('data-theme', 'shades-of-purple');

// Save to localStorage
localStorage.setItem('theme', 'shades-of-purple');

// Load saved theme
const savedTheme = localStorage.getItem('theme') || 'github-dark-classic';
document.documentElement.setAttribute('data-theme', savedTheme);`} language="javascript" />
	</section>
	
	<section>
		<h2>Theme File Structure</h2>
		<p>Themes are organized in <code>src/styles/themes/</code>:</p>
		<CodeBlock code={`themes/
├── dark/
│   ├── github-dark-classic.css
│   ├── shades-of-purple.css
│   ├── sandstorm-classic.css
│   ├── rocky-blood-orange.css
│   ├── minimal-dark-neon-yellow.css
│   ├── hack-the-box.css
│   └── pink-cat-boo.css
└── light/
    ├── github-light.css
    ├── red-velvet-cupcake.css
    ├── orangy-one-light.css
    ├── sunflower.css
    ├── green-breeze-light.css
    ├── cute-pink.css
    └── semi-light-purple.css`} language="plaintext" />
	</section>
	
	<section>
		<h2>Creating Custom Themes</h2>
		<ol>
			<li>Create a new theme file in <code>src/styles/themes/dark/</code> or <code>src/styles/themes/light/</code></li>
			<li>Use the <code>[data-theme="your-theme-name"]</code> selector</li>
			<li>Define all semantic variables including contrast-aware text colors</li>
			<li>Import in <code>src/styles/main.css</code></li>
		</ol>
		
		<h3>Example Theme</h3>
		<CodeBlock code={`/* My Custom Theme */
/* Author: Your Name */

[data-theme="my-theme"] {
  --bg: oklch(15% 0.015 270.5deg);
  --bg-alt: oklch(12% 0.012 270.5deg);
  --fg: oklch(95% 0.003 100.2deg);
  --fg-dim: oklch(85% 0.003 100.2deg);
  --current-line: oklch(25% 0.022 270.5deg);
  --selection: oklch(25% 0.022 270.5deg);
  
  /* Accent colors */
  --accent-color: oklch(65% 0.180 290.1deg);
  --accent-hover-color: oklch(70% 0.195 340.1deg);
  
  /* Semantic mappings */
  --background: var(--bg);
  --background-alt: var(--bg-alt);
  --text: var(--fg);
  --text-dim: var(--fg-dim);
  --border: var(--current-line);
  --accent: var(--accent-color);
  --accent-hover: var(--accent-hover-color);
  
  /* Contrast-aware text colors */
  --accent-text: oklch(100% 0 0deg); /* White text for dark accent */
  --success-text: oklch(100% 0 0deg);
  --warning-text: oklch(20% 0 0deg); /* Dark text for light yellow */
  --error-text: oklch(100% 0 0deg);
  --info-text: oklch(100% 0 0deg);
}`} language="css" />
		
		<h3>Contrast Text Colors</h3>
		<p>When creating themes, ensure proper contrast by setting text colors based on background lightness:</p>
		<ul>
			<li><strong>Dark backgrounds</strong> (&lt; 50% lightness): Use white text (<code>oklch(100% 0 0deg)</code>)</li>
			<li><strong>Light backgrounds</strong> (&gt;= 50% lightness): Use dark text (<code>oklch(20% 0 0deg)</code>)</li>
			<li><strong>Warning colors</strong> (typically 80%+ lightness): Always use dark text</li>
		</ul>
		<p>This ensures WCAG AA compliance (4.5:1 contrast ratio for normal text).</p>
	</section>
	
	<section>
		<h2>Color Format</h2>
		<p>All themes use <strong>OKLCH</strong> format with percentages and degrees:</p>
		<CodeBlock code={`--bg: oklch(15% 0.015 270.5deg);`} language="css" />
		<p>Format: <code>oklch(lightness% chroma hue)</code></p>
		
		<h3>OKLCH Benefits</h3>
		<ul>
			<li>Perceptually uniform color space</li>
			<li>Better color manipulation</li>
			<li>Consistent appearance across displays</li>
		</ul>
		
		<h3>Color Conversion</h3>
		<p>To convert from hex to OKLCH:</p>
		<ul>
			<li>Use online tools like <a href="https://oklch.com" target="_blank" rel="noopener">oklch.com</a></li>
			<li>Or use <a href="https://www.hex2oklch.com/" target="_blank" rel="noopener">hex2oklch.com</a></li>
		</ul>
	</section>
	
	<section>
		<h2>Theme Persistence</h2>
		<p>The theme switcher automatically saves the selected theme to <code>localStorage</code> and restores it on page load. An inline script in <code>Layout.astro</code> prevents theme flash by setting the theme immediately before the page renders.</p>
	</section>
</DocsLayout>

<style>
	.theming-page__grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
		gap: 1.5rem;
		margin: 2rem 0;
	}
	.theming-page__card-header {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		margin-bottom: 0.75rem;
	}
	.theming-page__card-desc {
		margin: 0 0 var(--spacing-2) 0;
		color: var(--text-dim);
		font-size: var(--font-size-sm);
	}
	.theming-page__card-meta {
		margin: 0;
		font-size: var(--font-size-xs);
		color: var(--text-dim);
	}
	.theming-page__card-meta:last-of-type {
		margin-top: var(--spacing-1);
	}
</style>

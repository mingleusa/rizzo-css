---
import DocsLayout from '../../layouts/DocsLayout.astro';
import ThemeSwitcher from '../../components/ThemeSwitcher.astro';
import CopyToClipboard from '../../components/CopyToClipboard.astro';
import Card from '../../components/Card.astro';

const COLOR_SCALE_STEPS = [50, 100, 200, 300, 400, 500, 600, 700, 800, 900, 950] as const;
const COLOR_SCALES: { id: string; label: string }[] = [
	{ id: 'neutral', label: 'Neutral' },
	{ id: 'accent', label: 'Accent' },
	{ id: 'success', label: 'Success' },
	{ id: 'warning', label: 'Warning' },
	{ id: 'error', label: 'Error' },
	{ id: 'info', label: 'Info' },
];

function textColorForStep(step: number): string {
	return step <= 400 ? 'var(--text)' : 'var(--background)';
}
---

<DocsLayout title="Colors" description="Complete color reference with multiple format options (OKLCH, Hex, RGB, HSL, CSS Variable)">
	<div class="colors-doc">
	<section>
		<h2>Color Reference</h2>
		<p>All colors in Rizzo CSS use semantic variables that adapt to the selected theme. Switch themes to see how colors change. Select a format tab to view and copy colors in that format.</p>
		<p>All color formats (OKLCH, Hex, RGB, HSL, and CSS Variable) are automatically converted and displayed. Click any copy button to copy the color value in the selected format to your clipboard.</p>
		
		<div class="example">
			<div class="example-title">Try Themes</div>
			<ThemeSwitcher />
		</div>
	</section>
	
	<section>
		<div class="color-format-tabs" role="tablist" aria-label="Color format selection">
			<span class="color-format-tab" role="tab" tabindex="0" aria-selected="true" aria-controls="color-format-panel" id="oklch-tab" data-format="oklch">OKLCH</span>
			<span class="color-format-tab" role="tab" tabindex="-1" aria-selected="false" aria-controls="color-format-panel" id="hex-tab" data-format="hex">Hex</span>
			<span class="color-format-tab" role="tab" tabindex="-1" aria-selected="false" aria-controls="color-format-panel" id="rgb-tab" data-format="rgb">RGB</span>
			<span class="color-format-tab" role="tab" tabindex="-1" aria-selected="false" aria-controls="color-format-panel" id="hsl-tab" data-format="hsl">HSL</span>
			<span class="color-format-tab" role="tab" tabindex="-1" aria-selected="false" aria-controls="color-format-panel" id="cssvar-tab" data-format="cssvar">CSS Variable</span>
		</div>

		<div id="color-format-panel" role="tabpanel" aria-labelledby="oklch-tab">
		<h2>Core Colors</h2>
		<div class="colors-grid">
			<div class="color-card" style="--color-card-bg: var(--background);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--background);" data-color-var="--background" data-color-source="--bg">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Background</h3>
						<p class="color-swatch__var">--background</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--background-alt);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--background-alt);" data-color-var="--background-alt" data-color-source="--bg-alt">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Background Alt</h3>
						<p class="color-swatch__var">--background-alt</p>
						<div class="color-swatch__formats">
							<CopyToClipboard id="copy-color-background-alt" value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--text);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--text); color: var(--background);" data-color-var="--text" data-color-source="--fg">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Text</h3>
						<p class="color-swatch__var">--text</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--text-dim);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--text-dim); color: var(--background);" data-color-var="--text-dim" data-color-source="--fg-dim">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Text Dim</h3>
						<p class="color-swatch__var">--text-dim</p>
						<div class="color-swatch__formats">
							<CopyToClipboard id="copy-color-text-dim" value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--border);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--border);" data-color-var="--border" data-color-source="--current-line">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Border</h3>
						<p class="color-swatch__var">--border</p>
						<div class="color-swatch__formats">
							<CopyToClipboard id="copy-color-border" value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--selection);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--selection); color: var(--text);" data-color-var="--selection">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Selection</h3>
						<p class="color-swatch__var">--selection</p>
						<p class="color-swatch__desc">Text selection highlight</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--background);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--background); color: var(--icon);" data-color-var="--icon">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Icon</h3>
						<p class="color-swatch__var">--icon</p>
						<p class="color-swatch__desc">SVG currentColor</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--background);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--background); color: var(--icon-dim);" data-color-var="--icon-dim">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Icon Dim</h3>
						<p class="color-swatch__var">--icon-dim</p>
						<p class="color-swatch__desc">Secondary icons</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
		</div>
		</div>
	</section>
	
	<section>
		<h2>Accent Colors</h2>
		<div class="colors-grid">
			<div class="color-card" style="--color-card-bg: var(--accent);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--accent); color: var(--accent-text);" data-color-var="--accent" data-color-source="--purple,--cyan,--green">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Accent</h3>
						<p class="color-swatch__var">--accent</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--accent-hover);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--accent-hover); color: var(--accent-text);" data-color-var="--accent-hover" data-color-source="--pink,--purple,--cyan">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Accent Hover</h3>
						<p class="color-swatch__var">--accent-hover</p>
						<div class="color-swatch__formats">
							<CopyToClipboard id="copy-color-accent-hover" value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--accent-text);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--accent-text); color: var(--accent);" data-color-var="--accent-text" data-color-source="--purple,--cyan,--green">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Accent Text</h3>
						<p class="color-swatch__var">--accent-text</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--background);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--background); color: var(--accent-fg); border: 2px solid var(--accent-fg);" data-color-var="--accent-fg" data-color-source="--cyan,--purple,--green">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Accent FG</h3>
						<p class="color-swatch__var">--accent-fg</p>
						<p class="color-swatch__desc">Links, outline buttons, tabs, code</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--background);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--background); color: var(--accent-fg-hover); border: 2px solid var(--accent-fg-hover);" data-color-var="--accent-fg-hover" data-color-source="--cyan,--purple,--green">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Accent FG Hover</h3>
						<p class="color-swatch__var">--accent-fg-hover</p>
						<p class="color-swatch__desc">Link/outline hover</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
		</div>
	</section>
	
	<section>
		<h2>Semantic Colors</h2>
		<div class="colors-grid">
			<div class="color-card" style="--color-card-bg: var(--success);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--success); color: var(--success-text);" data-color-var="--success" data-color-source="--green">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Success</h3>
						<p class="color-swatch__var">--success</p>
						<div class="color-swatch__formats">
							<CopyToClipboard id="copy-color-success" value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--success-text);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--success-text); color: var(--success);" data-color-var="--success-text" data-color-source="--green">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Success Text</h3>
						<p class="color-swatch__var">--success-text</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--warning);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--warning); color: var(--warning-text);" data-color-var="--warning" data-color-source="--yellow">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Warning</h3>
						<p class="color-swatch__var">--warning</p>
						<div class="color-swatch__formats">
							<CopyToClipboard id="copy-color-warning" value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--warning-text);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--warning-text); color: var(--warning);" data-color-var="--warning-text" data-color-source="--yellow">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Warning Text</h3>
						<p class="color-swatch__var">--warning-text</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--error);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--error); color: var(--error-text);" data-color-var="--error" data-color-source="--red">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Error</h3>
						<p class="color-swatch__var">--error</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--error-text);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--error-text); color: var(--error);" data-color-var="--error-text" data-color-source="--red">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Error Text</h3>
						<p class="color-swatch__var">--error-text</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--info);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--info); color: var(--info-text);" data-color-var="--info" data-color-source="--cyan">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Info</h3>
						<p class="color-swatch__var">--info</p>
						<div class="color-swatch__formats">
							<CopyToClipboard id="copy-color-info" value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			
			<div class="color-card" style="--color-card-bg: var(--info-text);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--info-text); color: var(--info);" data-color-var="--info-text" data-color-source="--cyan">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Info Text</h3>
						<p class="color-swatch__var">--info-text</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
		</div>
	</section>
	
	<section>
		<h2>Text on solid (buttons, badges)</h2>
		<p>Contrast-aware text for solid semantic backgrounds. Themes may override for WCAG AA.</p>
		<div class="colors-grid">
			<div class="color-card" style="--color-card-bg: var(--success);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--success); color: var(--success-text-on-solid);" data-color-var="--success-text-on-solid" data-color-source="--green">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Success Text on Solid</h3>
						<p class="color-swatch__var">--success-text-on-solid</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			<div class="color-card" style="--color-card-bg: var(--warning);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--warning); color: var(--warning-text-on-solid);" data-color-var="--warning-text-on-solid" data-color-source="--yellow">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Warning Text on Solid</h3>
						<p class="color-swatch__var">--warning-text-on-solid</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			<div class="color-card" style="--color-card-bg: var(--error);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--error); color: var(--error-text-on-solid);" data-color-var="--error-text-on-solid" data-color-source="--red">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Error Text on Solid</h3>
						<p class="color-swatch__var">--error-text-on-solid</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
			<div class="color-card" style="--color-card-bg: var(--info);">
				<Card variant="elevated">
				<div class="color-swatch" style="background-color: var(--info); color: var(--info-text-on-solid);" data-color-var="--info-text-on-solid" data-color-source="--cyan">
					<div class="color-swatch__info">
						<h3 class="color-swatch__name">Info Text on Solid</h3>
						<p class="color-swatch__var">--info-text-on-solid</p>
						<div class="color-swatch__formats">
							<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
						</div>
					</div>
				</div>
				</Card>
			</div>
		</div>
	</section>

	<section class="color-scales-section">
		<h2>Color scales (design tokens)</h2>
		<p>Stepped shades (50â€“950) for each scale. Step 500 is the theme base for accent, success, warning, error, and info. Neutral is a fixed gray scale. All values respect the format tabs above and support copy to clipboard.</p>
		{COLOR_SCALES.map((scale) => (
			<div class="color-scales-section__block">
				<h3 class="color-scales-section__scale-title">{scale.label}</h3>
				<div class="colors-grid colors-grid--scales">
					{COLOR_SCALE_STEPS.map((step) => {
						const varName = `--color-${scale.id}-${step}`;
						const textColor = textColorForStep(step);
						return (
							<div class="color-card" style={`--color-card-bg: var(${varName});`}>
								<Card variant="elevated">
								<div
									class="color-swatch color-swatch--scale"
									style={`background-color: var(${varName}); color: ${textColor};`}
									data-color-var={varName}
								>
									<div class="color-swatch__info">
										<h4 class="color-swatch__name">{scale.label} {step}</h4>
										<p class="color-swatch__var">{varName}</p>
										<div class="color-swatch__formats">
											<CopyToClipboard value="" format="" class="color-format__copy" data-color-copy />
										</div>
									</div>
								</div>
								</Card>
							</div>
						);
					})}
				</div>
			</div>
		))}
	</section>
	</div>
</DocsLayout>

<style is:global>
	/* Same as core: wrapper shows color, inner card and swatch transparent. Global so scale cards (from map) get it too. */
	.colors-doc .color-card {
		background-color: var(--color-card-bg) !important;
		border-radius: var(--radius-lg);
		overflow: hidden;
	}
	.colors-doc .color-card .card,
	.colors-doc .color-card .card.card--elevated {
		background: transparent !important;
		box-shadow: none;
	}
	.colors-doc .color-card .color-swatch {
		background: transparent !important;
	}
</style>

<style>
	.color-format-tabs {
		display: flex;
		gap: var(--spacing-2);
		margin: var(--spacing-8) 0 var(--spacing-4) 0;
		border-bottom: var(--outline-width) solid var(--border);
		padding-bottom: var(--spacing-2);
		overflow-x: auto;
	}
	
	.color-format-tab {
		display: inline-flex;
		align-items: center;
		padding: 0.5rem 1rem;
		background: none;
		border: none;
		border-bottom: 2px solid transparent;
		color: var(--text-dim);
		font-weight: var(--font-weight-medium);
		font-family: inherit;
		font-size: inherit;
		cursor: pointer;
		transition: color 0.2s, border-color 0.2s;
		margin-bottom: -0.5rem;
		white-space: nowrap;
	}
	
	.color-format-tab:hover {
		color: var(--text);
	}
	
	.color-format-tab[aria-selected="true"] {
		color: var(--accent-fg);
		border-bottom-color: var(--accent-fg);
	}
	
	.color-format-tab:focus-visible {
		outline: 2px solid var(--accent-fg);
		outline-offset: var(--outline-offset);
		border-radius: var(--radius);
	}
	
	.colors-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
		gap: var(--spacing-6);
		margin: var(--spacing-8) 0;
	}

	.color-swatch {
		min-height: 320px;
		border-radius: var(--radius-lg);
		padding: var(--spacing-6);
		display: flex;
		flex-direction: column;
		justify-content: flex-end;
		position: relative;
		overflow: hidden;
	}
	
	.color-swatch__info {
		background-color: oklch(from var(--background-alt) l c h / 95%);
		backdrop-filter: blur(8px);
		padding: var(--spacing-4);
		border-radius: var(--radius-md);
		margin-top: auto;
		min-height: 120px;
	}
	
	.color-swatch__name {
		margin: 0 0 0.25rem 0;
		font-size: var(--font-size-lg);
		font-weight: var(--font-weight-semibold);
	}
	
	.color-swatch__var {
		margin: 0 0 0.75rem 0;
		font-size: var(--font-size-sm);
		font-family: var(--font-family-mono);
		color: var(--text-dim);
	}
	
	.color-swatch__formats {
		display: flex;
		flex-direction: column;
		gap: 0.5rem;
	}
	
	.color-format__copy {
		width: 100%;
	}
	
	/* Vertically center copy button: value + icon in a row, icon centered to multi-line value */
	.color-swatch :global(.copy-to-clipboard) {
		display: inline-flex;
		align-items: center;
		width: 100%;
	}
	
	/* Show full color value (no ellipsis) and leave room for icon */
	.color-swatch :global(.copy-to-clipboard__text) {
		flex: 1;
		min-width: 0;
		white-space: normal;
		overflow: visible;
		text-overflow: clip;
		word-break: break-all;
	}
	
	.color-swatch :global(.copy-to-clipboard__icon--copy) {
		align-self: center;
		flex-shrink: 0;
	}
	
	.color-scales-section {
		margin-top: var(--spacing-12);
	}
	
	.color-scales-section__block {
		margin-bottom: var(--spacing-10);
	}
	
	.color-scales-section__block:last-child {
		margin-bottom: 0;
	}
	
	.color-scales-section__scale-title {
		font-size: var(--font-size-2xl);
		font-weight: var(--font-weight-bold);
		color: var(--text);
		margin: var(--spacing-8) 0 var(--spacing-4) 0;
		padding-bottom: var(--spacing-2);
		border-bottom: 1px solid var(--border);
	}
	
	.color-scales-section__block:first-child .color-scales-section__scale-title {
		margin-top: var(--spacing-6);
	}
	
	.colors-grid--scales {
		grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
	}
	
	.color-swatch--scale {
		min-height: 260px;
	}
	
	.color-swatch--scale .color-swatch__info {
		min-height: 100px;
	}
	
	@media (width <= 640px) {
		.colors-grid {
			grid-template-columns: 1fr;
		}
		
		.colors-grid--scales {
			grid-template-columns: 1fr;
		}
		
		.color-swatch {
			min-height: 280px;
		}
		
		.color-swatch__info {
			min-height: 100px;
		}
		
		.color-swatch--scale {
			min-height: 240px;
		}
	}
</style>

<script>
	// @ts-nocheck
	(function initColorFormats() {
		// Wait for DOM to be ready
		const init = () => {
			// Theme OKLCH mappings - maps semantic vars to OKLCH values per theme (all 14 themes)
			const themeOklchMap = {
			'github-dark-classic': {
				'--background': 'oklch(18% 0.012 264deg)',
				'--background-alt': 'oklch(15% 0.01 264deg)',
				'--text': 'oklch(91% 0.004 264deg)',
				'--text-dim': 'oklch(66% 0.01 264deg)',
				'--border': 'oklch(13% 0.01 264deg)',
				'--selection': 'oklch(28% 0.08 255deg)',
				'--icon': 'oklch(91% 0.004 264deg)',
				'--icon-dim': 'oklch(75% 0.01 264deg)',
				'--accent': 'oklch(45% 0.18 250deg)',
				'--accent-hover': 'oklch(48% 0.18 250deg)',
				'--accent-fg': 'oklch(72% 0.12 250deg)',
				'--accent-fg-hover': 'oklch(78% 0.12 250deg)',
				'--success': 'oklch(72% 0.19 145deg)',
				'--warning': 'oklch(78% 0.12 55deg)',
				'--error': 'oklch(68% 0.16 15deg)',
				'--info': 'oklch(72% 0.12 250deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(100% 0 0deg)',
				'--success-text-on-solid': 'oklch(22% 0.03 145deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 55deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(22% 0.03 25deg)',
				'--info-text': 'oklch(100% 0 0deg)',
				'--info-text-on-solid': 'oklch(22% 0.03 250deg)',
			},
			'github-light': {
				'--background': 'oklch(100% 0 0deg)',
				'--background-alt': 'oklch(97% 0.005 264deg)',
				'--text': 'oklch(18% 0.02 264deg)',
				'--text-dim': 'oklch(52% 0.02 264deg)',
				'--border': 'oklch(86% 0.01 264deg)',
				'--selection': 'oklch(88% 0.06 255deg)',
				'--icon': 'oklch(18% 0.02 264deg)',
				'--icon-dim': 'oklch(52% 0.02 264deg)',
				'--accent': 'oklch(55% 0.18 255deg)',
				'--accent-hover': 'oklch(38% 0.18 255deg)',
				'--accent-fg': 'oklch(55% 0.18 255deg)',
				'--accent-fg-hover': 'oklch(38% 0.18 255deg)',
				'--success': 'oklch(48% 0.16 145deg)',
				'--warning': 'oklch(75% 0.14 90deg)',
				'--error': 'oklch(50% 0.2 25deg)',
				'--info': 'oklch(55% 0.18 255deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(20% 0 0deg)',
				'--success-text-on-solid': 'oklch(100% 0 0deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 90deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(100% 0 0deg)',
				'--info-text': 'oklch(20% 0 0deg)',
				'--info-text-on-solid': 'oklch(100% 0 0deg)',
			},
			'green-breeze-light': {
				'--background': 'oklch(98% 0.008 140deg)',
				'--background-alt': 'oklch(96% 0.01 140deg)',
				'--text': 'oklch(20% 0.02 80deg)',
				'--text-dim': 'oklch(45% 0.02 80deg)',
				'--border': 'oklch(88% 0.02 140deg)',
				'--selection': 'oklch(88% 0.06 200deg)',
				'--icon': 'oklch(20% 0.02 80deg)',
				'--icon-dim': 'oklch(45% 0.02 80deg)',
				'--accent': 'oklch(48% 0.16 155deg)',
				'--accent-hover': 'oklch(38% 0.16 155deg)',
				'--accent-fg': 'oklch(48% 0.16 155deg)',
				'--accent-fg-hover': 'oklch(38% 0.16 155deg)',
				'--success': 'oklch(42% 0.14 145deg)',
				'--warning': 'oklch(75% 0.14 90deg)',
				'--error': 'oklch(45% 0.18 25deg)',
				'--info': 'oklch(58% 0.14 205deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(20% 0 0deg)',
				'--success-text-on-solid': 'oklch(100% 0 0deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 90deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(100% 0 0deg)',
				'--info-text': 'oklch(20% 0 0deg)',
				'--info-text-on-solid': 'oklch(20% 0 0deg)',
			},
			'cute-pink': {
				'--background': 'oklch(100% 0 0deg)',
				'--background-alt': 'oklch(98% 0.025 350deg)',
				'--text': 'oklch(25% 0.01 0deg)',
				'--text-dim': 'oklch(50% 0.02 0deg)',
				'--border': 'oklch(88% 0.06 350deg)',
				'--selection': 'oklch(78% 0.12 350deg)',
				'--icon': 'oklch(25% 0.01 0deg)',
				'--icon-dim': 'oklch(50% 0.02 0deg)',
				'--accent': 'oklch(62% 0.22 350deg)',
				'--accent-hover': 'oklch(55% 0.22 350deg)',
				'--accent-fg': 'oklch(62% 0.22 350deg)',
				'--accent-fg-hover': 'oklch(55% 0.22 350deg)',
				'--success': 'oklch(48% 0.12 145deg)',
				'--warning': 'oklch(75% 0.14 90deg)',
				'--error': 'oklch(55% 0.2 25deg)',
				'--info': 'oklch(55% 0.1 220deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(20% 0 0deg)',
				'--success-text-on-solid': 'oklch(100% 0 0deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 90deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(100% 0 0deg)',
				'--info-text': 'oklch(20% 0 0deg)',
				'--info-text-on-solid': 'oklch(20% 0 0deg)',
			},
			'semi-light-purple': {
				'--background': 'oklch(96% 0.02 290deg)',
				'--background-alt': 'oklch(94% 0.03 290deg)',
				'--text': 'oklch(25% 0.02 290deg)',
				'--text-dim': 'oklch(48% 0.03 290deg)',
				'--border': 'oklch(86% 0.05 290deg)',
				'--selection': 'oklch(88% 0.06 290deg)',
				'--icon': 'oklch(25% 0.02 290deg)',
				'--icon-dim': 'oklch(48% 0.03 290deg)',
				'--accent': 'oklch(52% 0.2 290deg)',
				'--accent-hover': 'oklch(45% 0.2 290deg)',
				'--accent-fg': 'oklch(52% 0.2 290deg)',
				'--accent-fg-hover': 'oklch(45% 0.2 290deg)',
				'--success': 'oklch(50% 0.14 150deg)',
				'--warning': 'oklch(75% 0.14 90deg)',
				'--error': 'oklch(52% 0.18 25deg)',
				'--info': 'oklch(58% 0.12 220deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(20% 0 0deg)',
				'--success-text-on-solid': 'oklch(100% 0 0deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 90deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(100% 0 0deg)',
				'--info-text': 'oklch(20% 0 0deg)',
				'--info-text-on-solid': 'oklch(20% 0 0deg)',
			},
			'hack-the-box': {
				'--background': 'oklch(16% 0.03 255deg)',
				'--background-alt': 'oklch(14% 0.028 255deg)',
				'--text': 'oklch(82% 0.03 255deg)',
				'--text-dim': 'oklch(62% 0.04 255deg)',
				'--border': 'oklch(20% 0.03 255deg)',
				'--selection': 'oklch(55% 0.08 255deg)',
				'--icon': 'oklch(82% 0.03 255deg)',
				'--icon-dim': 'oklch(70% 0.04 255deg)',
				'--accent': 'oklch(88% 0.22 130deg)',
				'--accent-hover': 'oklch(85% 0.2 125deg)',
				'--accent-fg': 'oklch(88% 0.22 130deg)',
				'--accent-fg-hover': 'oklch(85% 0.2 125deg)',
				'--success': 'oklch(88% 0.22 130deg)',
				'--warning': 'oklch(82% 0.16 95deg)',
				'--error': 'oklch(65% 0.22 25deg)',
				'--info': 'oklch(68% 0.14 240deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(20% 0 0deg)',
				'--success-text-on-solid': 'oklch(22% 0.03 130deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 95deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(22% 0.03 25deg)',
				'--info-text': 'oklch(20% 0 0deg)',
				'--info-text-on-solid': 'oklch(22% 0.03 240deg)',
			},
			'pink-cat-boo': {
				'--background': 'oklch(18% 0.03 280deg)',
				'--background-alt': 'oklch(20% 0.035 280deg)',
				'--text': 'oklch(98% 0.01 350deg)',
				'--text-dim': 'oklch(65% 0.04 280deg)',
				'--border': 'oklch(35% 0.04 280deg)',
				'--selection': 'oklch(28% 0.06 320deg)',
				'--icon': 'oklch(98% 0.01 350deg)',
				'--icon-dim': 'oklch(75% 0.04 280deg)',
				'--accent': 'oklch(78% 0.12 350deg)',
				'--accent-hover': 'oklch(82% 0.1 350deg)',
				'--accent-fg': 'oklch(78% 0.12 350deg)',
				'--accent-fg-hover': 'oklch(82% 0.1 350deg)',
				'--success': 'oklch(72% 0.14 165deg)',
				'--warning': 'oklch(78% 0.14 85deg)',
				'--error': 'oklch(72% 0.18 350deg)',
				'--info': 'oklch(72% 0.1 220deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(20% 0 0deg)',
				'--success-text-on-solid': 'oklch(22% 0.03 165deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 85deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(22% 0.03 350deg)',
				'--info-text': 'oklch(20% 0 0deg)',
				'--info-text-on-solid': 'oklch(22% 0.03 220deg)',
			},
			'shades-of-purple': {
				'--background': 'oklch(18% 0.08 290deg)',
				'--background-alt': 'oklch(15% 0.08 290deg)',
				'--text': 'oklch(95% 0.01 300deg)',
				'--text-dim': 'oklch(75% 0.05 300deg)',
				'--border': 'oklch(25% 0.10 290deg)',
				'--selection': 'oklch(30% 0.12 290deg)',
				'--icon': 'oklch(95% 0.01 300deg)',
				'--icon-dim': 'oklch(80% 0.05 300deg)',
				'--accent': 'oklch(65% 0.25 290deg)',
				'--accent-hover': 'oklch(75% 0.22 340deg)',
				'--accent-fg': 'oklch(75% 0.22 340deg)',
				'--accent-fg-hover': 'oklch(80% 0.2 340deg)',
				'--success': 'oklch(70% 0.20 150deg)',
				'--warning': 'oklch(85% 0.18 100deg)',
				'--error': 'oklch(65% 0.22 25deg)',
				'--info': 'oklch(75% 0.15 220deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(20% 0 0deg)',
				'--success-text-on-solid': 'oklch(22% 0.03 145deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 100deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(22% 0.03 25deg)',
				'--info-text': 'oklch(20% 0 0deg)',
				'--info-text-on-solid': 'oklch(22% 0.03 220deg)',
			},
			'sandstorm-classic': {
				'--background': 'oklch(16% 0.025 25deg)',
				'--background-alt': 'oklch(13% 0.02 25deg)',
				'--text': 'oklch(90% 0.01 25deg)',
				'--text-dim': 'oklch(62% 0.02 25deg)',
				'--border': 'oklch(22% 0.02 25deg)',
				'--selection': 'oklch(28% 0.06 25deg)',
				'--icon': 'oklch(90% 0.01 25deg)',
				'--icon-dim': 'oklch(72% 0.02 25deg)',
				'--accent': 'oklch(58% 0.18 25deg)',
				'--accent-hover': 'oklch(62% 0.16 25deg)',
				'--accent-fg': 'oklch(72% 0.14 25deg)',
				'--accent-fg-hover': 'oklch(78% 0.12 25deg)',
				'--success': 'oklch(68% 0.18 145deg)',
				'--warning': 'oklch(72% 0.14 55deg)',
				'--error': 'oklch(58% 0.18 25deg)',
				'--info': 'oklch(68% 0.12 220deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(20% 0 0deg)',
				'--success-text-on-solid': 'oklch(22% 0.03 145deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 55deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(22% 0.03 25deg)',
				'--info-text': 'oklch(20% 0 0deg)',
				'--info-text-on-solid': 'oklch(22% 0.03 220deg)',
			},
			'red-velvet-cupcake': {
				'--background': 'oklch(99% 0.005 25deg)',
				'--background-alt': 'oklch(96% 0.01 25deg)',
				'--text': 'oklch(28% 0.02 250deg)',
				'--text-dim': 'oklch(48% 0.02 250deg)',
				'--border': 'oklch(88% 0.015 25deg)',
				'--selection': 'oklch(92% 0.04 25deg)',
				'--icon': 'oklch(28% 0.02 250deg)',
				'--icon-dim': 'oklch(48% 0.02 250deg)',
				'--accent': 'oklch(55% 0.17 25deg)',
				'--accent-hover': 'oklch(48% 0.18 25deg)',
				'--accent-fg': 'oklch(55% 0.17 25deg)',
				'--accent-fg-hover': 'oklch(48% 0.18 25deg)',
				'--success': 'oklch(50% 0.16 145deg)',
				'--warning': 'oklch(62% 0.14 55deg)',
				'--error': 'oklch(55% 0.17 25deg)',
				'--info': 'oklch(55% 0.12 220deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(20% 0 0deg)',
				'--success-text-on-solid': 'oklch(100% 0 0deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 55deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(100% 0 0deg)',
				'--info-text': 'oklch(20% 0 0deg)',
				'--info-text-on-solid': 'oklch(20% 0 0deg)',
			},
			'rocky-blood-orange': {
				'--background': 'oklch(16% 0.03 45deg)',
				'--background-alt': 'oklch(13% 0.025 45deg)',
				'--text': 'oklch(90% 0.01 45deg)',
				'--text-dim': 'oklch(60% 0.02 45deg)',
				'--border': 'oklch(22% 0.02 45deg)',
				'--selection': 'oklch(28% 0.06 45deg)',
				'--icon': 'oklch(90% 0.01 45deg)',
				'--icon-dim': 'oklch(72% 0.02 45deg)',
				'--accent': 'oklch(62% 0.16 55deg)',
				'--accent-hover': 'oklch(68% 0.14 55deg)',
				'--accent-fg': 'oklch(72% 0.14 55deg)',
				'--accent-fg-hover': 'oklch(78% 0.12 55deg)',
				'--success': 'oklch(68% 0.18 145deg)',
				'--warning': 'oklch(62% 0.16 55deg)',
				'--error': 'oklch(58% 0.18 25deg)',
				'--info': 'oklch(68% 0.12 220deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(20% 0 0deg)',
				'--success-text-on-solid': 'oklch(22% 0.03 145deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 55deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(22% 0.03 25deg)',
				'--info-text': 'oklch(20% 0 0deg)',
				'--info-text-on-solid': 'oklch(22% 0.03 220deg)',
			},
			'orangy-one-light': {
				'--background': 'oklch(99% 0.008 70deg)',
				'--background-alt': 'oklch(96% 0.012 70deg)',
				'--text': 'oklch(22% 0.02 70deg)',
				'--text-dim': 'oklch(48% 0.02 70deg)',
				'--border': 'oklch(88% 0.02 70deg)',
				'--selection': 'oklch(92% 0.05 70deg)',
				'--icon': 'oklch(22% 0.02 70deg)',
				'--icon-dim': 'oklch(48% 0.02 70deg)',
				'--accent': 'oklch(58% 0.16 55deg)',
				'--accent-hover': 'oklch(50% 0.18 55deg)',
				'--accent-fg': 'oklch(58% 0.16 55deg)',
				'--accent-fg-hover': 'oklch(50% 0.18 55deg)',
				'--success': 'oklch(50% 0.16 145deg)',
				'--warning': 'oklch(58% 0.16 55deg)',
				'--error': 'oklch(52% 0.18 25deg)',
				'--info': 'oklch(55% 0.12 220deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(20% 0 0deg)',
				'--success-text-on-solid': 'oklch(100% 0 0deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 55deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(100% 0 0deg)',
				'--info-text': 'oklch(20% 0 0deg)',
				'--info-text-on-solid': 'oklch(20% 0 0deg)',
			},
			'minimal-dark-neon-yellow': {
				'--background': 'oklch(14% 0.01 95deg)',
				'--background-alt': 'oklch(11% 0.008 95deg)',
				'--text': 'oklch(92% 0.02 95deg)',
				'--text-dim': 'oklch(58% 0.02 95deg)',
				'--border': 'oklch(20% 0.02 95deg)',
				'--selection': 'oklch(25% 0.08 95deg)',
				'--icon': 'oklch(92% 0.02 95deg)',
				'--icon-dim': 'oklch(72% 0.02 95deg)',
				'--accent': 'oklch(88% 0.18 95deg)',
				'--accent-hover': 'oklch(90% 0.16 95deg)',
				'--accent-fg': 'oklch(88% 0.18 95deg)',
				'--accent-fg-hover': 'oklch(90% 0.16 95deg)',
				'--success': 'oklch(72% 0.18 145deg)',
				'--warning': 'oklch(78% 0.14 55deg)',
				'--error': 'oklch(62% 0.18 25deg)',
				'--info': 'oklch(72% 0.12 220deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(20% 0 0deg)',
				'--success-text-on-solid': 'oklch(22% 0.03 145deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 55deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(22% 0.03 25deg)',
				'--info-text': 'oklch(20% 0 0deg)',
				'--info-text-on-solid': 'oklch(22% 0.03 220deg)',
			},
			'sunflower': {
				'--background': 'oklch(98% 0.03 95deg)',
				'--background-alt': 'oklch(95% 0.04 95deg)',
				'--text': 'oklch(22% 0.03 95deg)',
				'--text-dim': 'oklch(45% 0.03 95deg)',
				'--border': 'oklch(85% 0.04 95deg)',
				'--selection': 'oklch(88% 0.08 95deg)',
				'--icon': 'oklch(22% 0.03 95deg)',
				'--icon-dim': 'oklch(45% 0.03 95deg)',
				'--accent': 'oklch(75% 0.16 95deg)',
				'--accent-hover': 'oklch(65% 0.18 95deg)',
				'--accent-fg': 'oklch(75% 0.16 95deg)',
				'--accent-fg-hover': 'oklch(65% 0.18 95deg)',
				'--success': 'oklch(50% 0.16 145deg)',
				'--warning': 'oklch(62% 0.14 55deg)',
				'--error': 'oklch(52% 0.18 25deg)',
				'--info': 'oklch(55% 0.12 220deg)',
				'--accent-text': 'oklch(100% 0 0deg)',
				'--success-text': 'oklch(20% 0 0deg)',
				'--success-text-on-solid': 'oklch(100% 0 0deg)',
				'--warning-text': 'oklch(100% 0 0deg)',
				'--warning-text-on-solid': 'oklch(22% 0.02 55deg)',
				'--error-text': 'oklch(100% 0 0deg)',
				'--error-text-on-solid': 'oklch(100% 0 0deg)',
				'--info-text': 'oklch(20% 0 0deg)',
				'--info-text-on-solid': 'oklch(20% 0 0deg)',
			},
		};
		
			/** Scale token formulas: oklch(from var(--base) L C h). Step 500 = base; others use L,C with hue from base. */
			const scaleTokenFormulas = {
				'--color-accent-50': { baseVar: '--accent', L: 0.97, C: 0.03 }, '--color-accent-100': { baseVar: '--accent', L: 0.93, C: 0.06 }, '--color-accent-200': { baseVar: '--accent', L: 0.88, C: 0.1 }, '--color-accent-300': { baseVar: '--accent', L: 0.78, C: 0.14 }, '--color-accent-400': { baseVar: '--accent', L: 0.65, C: 0.16 }, '--color-accent-500': { baseVar: '--accent', L: null, C: null }, '--color-accent-600': { baseVar: '--accent', L: 0.45, C: 0.18 }, '--color-accent-700': { baseVar: '--accent', L: 0.38, C: 0.16 }, '--color-accent-800': { baseVar: '--accent', L: 0.3, C: 0.12 }, '--color-accent-900': { baseVar: '--accent', L: 0.22, C: 0.08 }, '--color-accent-950': { baseVar: '--accent', L: 0.15, C: 0.05 },
				'--color-success-50': { baseVar: '--success', L: 0.97, C: 0.03 }, '--color-success-100': { baseVar: '--success', L: 0.93, C: 0.06 }, '--color-success-200': { baseVar: '--success', L: 0.88, C: 0.1 }, '--color-success-300': { baseVar: '--success', L: 0.78, C: 0.14 }, '--color-success-400': { baseVar: '--success', L: 0.65, C: 0.16 }, '--color-success-500': { baseVar: '--success', L: null, C: null }, '--color-success-600': { baseVar: '--success', L: 0.45, C: 0.18 }, '--color-success-700': { baseVar: '--success', L: 0.38, C: 0.16 }, '--color-success-800': { baseVar: '--success', L: 0.3, C: 0.12 }, '--color-success-900': { baseVar: '--success', L: 0.22, C: 0.08 }, '--color-success-950': { baseVar: '--success', L: 0.15, C: 0.05 },
				'--color-warning-50': { baseVar: '--warning', L: 0.97, C: 0.03 }, '--color-warning-100': { baseVar: '--warning', L: 0.93, C: 0.06 }, '--color-warning-200': { baseVar: '--warning', L: 0.88, C: 0.1 }, '--color-warning-300': { baseVar: '--warning', L: 0.82, C: 0.12 }, '--color-warning-400': { baseVar: '--warning', L: 0.75, C: 0.14 }, '--color-warning-500': { baseVar: '--warning', L: null, C: null }, '--color-warning-600': { baseVar: '--warning', L: 0.55, C: 0.14 }, '--color-warning-700': { baseVar: '--warning', L: 0.45, C: 0.12 }, '--color-warning-800': { baseVar: '--warning', L: 0.35, C: 0.1 }, '--color-warning-900': { baseVar: '--warning', L: 0.25, C: 0.06 }, '--color-warning-950': { baseVar: '--warning', L: 0.18, C: 0.04 },
				'--color-error-50': { baseVar: '--error', L: 0.97, C: 0.03 }, '--color-error-100': { baseVar: '--error', L: 0.93, C: 0.06 }, '--color-error-200': { baseVar: '--error', L: 0.88, C: 0.1 }, '--color-error-300': { baseVar: '--error', L: 0.78, C: 0.14 }, '--color-error-400': { baseVar: '--error', L: 0.65, C: 0.18 }, '--color-error-500': { baseVar: '--error', L: null, C: null }, '--color-error-600': { baseVar: '--error', L: 0.45, C: 0.2 }, '--color-error-700': { baseVar: '--error', L: 0.38, C: 0.18 }, '--color-error-800': { baseVar: '--error', L: 0.3, C: 0.14 }, '--color-error-900': { baseVar: '--error', L: 0.22, C: 0.1 }, '--color-error-950': { baseVar: '--error', L: 0.15, C: 0.06 },
				'--color-info-50': { baseVar: '--info', L: 0.97, C: 0.03 }, '--color-info-100': { baseVar: '--info', L: 0.93, C: 0.06 }, '--color-info-200': { baseVar: '--info', L: 0.88, C: 0.08 }, '--color-info-300': { baseVar: '--info', L: 0.78, C: 0.1 }, '--color-info-400': { baseVar: '--info', L: 0.65, C: 0.12 }, '--color-info-500': { baseVar: '--info', L: null, C: null }, '--color-info-600': { baseVar: '--info', L: 0.45, C: 0.12 }, '--color-info-700': { baseVar: '--info', L: 0.38, C: 0.1 }, '--color-info-800': { baseVar: '--info', L: 0.3, C: 0.08 }, '--color-info-900': { baseVar: '--info', L: 0.22, C: 0.06 }, '--color-info-950': { baseVar: '--info', L: 0.15, C: 0.04 },
			};
		
			let currentFormat = 'oklch';
			
			const getCurrentTheme = () => {
				return document.documentElement.getAttribute('data-theme') || 'github-dark-classic';
			};
			
			/**
			 * @param {string} colorVar
			 * @returns {string}
			 */
			const getOklchValue = (/** @type {string} */ colorVar) => {
				const theme = getCurrentTheme();
				if (!theme || !themeOklchMap.hasOwnProperty(theme)) return '';
				// @ts-ignore - Dynamic theme access
				const themeMap = themeOklchMap[theme];
				if (!themeMap || !themeMap.hasOwnProperty(colorVar)) return '';
				return themeMap[colorVar] || '';
			};
			
			/** Extract hue (degrees) from oklch(L% C Hdeg). Returns null if not parseable. */
			const getHueFromOklch = (/** @type {string} */ oklchStr) => {
				const m = oklchStr.match(/oklch\([\d.]+%\s+[\d.]+\s+([\d.]+)deg\)/);
				return m ? parseFloat(m[1]) : null;
			};
			
			/**
			 * Convert OKLCH to RGB
			 * @param {string} oklch - OKLCH color string (e.g., "oklch(65% 0.180 290.1deg)")
			 * @returns {{r: number, g: number, b: number} | null}
			 */
			const oklchToRgb = (/** @type {string} */ oklch) => {
				try {
					const match = oklch.match(/oklch\(([\d.]+)%\s+([\d.]+)\s+([\d.]+)deg\)/);
					if (!match) return null;
					
					const L = parseFloat(match[1]) / 100; // Lightness 0-1
					const C = parseFloat(match[2]); // Chroma
					const H = (parseFloat(match[3]) * Math.PI) / 180; // Hue in radians
					
					// Convert OKLCH to linear RGB
					const a = C * Math.cos(H);
					const b = C * Math.sin(H);
					
					// Convert OKLCH to linear sRGB
					let l_ = L + 0.3963377774 * a + 0.2158037573 * b;
					let m_ = L - 0.1055613458 * a - 0.0638541728 * b;
					let s_ = L - 0.0894841775 * a - 1.2914855480 * b;
					
					l_ = l_ * l_ * l_;
					m_ = m_ * m_ * m_;
					s_ = s_ * s_ * s_;
					
					let r = +4.0767416621 * l_ - 3.3077115913 * m_ + 0.2309699292 * s_;
					let g = -1.2684380046 * l_ + 2.6097574011 * m_ - 0.3413193965 * s_;
					let bl = -0.0041960863 * l_ - 0.7034186147 * m_ + 1.7076147010 * s_;
					
					// Apply gamma correction
					r = r > 0.0031308 ? 1.055 * Math.pow(r, 1.0 / 2.4) - 0.055 : 12.92 * r;
					g = g > 0.0031308 ? 1.055 * Math.pow(g, 1.0 / 2.4) - 0.055 : 12.92 * g;
					bl = bl > 0.0031308 ? 1.055 * Math.pow(bl, 1.0 / 2.4) - 0.055 : 12.92 * bl;
					
					// Clamp to 0-255
					r = Math.round(Math.max(0, Math.min(255, r * 255)));
					g = Math.round(Math.max(0, Math.min(255, g * 255)));
					bl = Math.round(Math.max(0, Math.min(255, bl * 255)));
					
					return { r, g, b: bl };
				} catch (error) {
					return null;
				}
			};
			
			/**
			 * Convert RGB to Hex, RGB string, and HSL
			 * @param {number} r - Red (0-255)
			 * @param {number} g - Green (0-255)
			 * @param {number} b - Blue (0-255)
			 * @returns {{hex: string, rgb: string, hsl: string}}
			 */
			const rgbToFormats = (/** @type {number} */ r, /** @type {number} */ g, /** @type {number} */ b) => {
				// Convert to hex
				const hex = '#' + [r, g, b].map(x => {
					const hex = x.toString(16);
					return hex.length === 1 ? '0' + hex : hex;
				}).join('').toUpperCase();
				
				// Convert to HSL
				const rNorm = r / 255;
				const gNorm = g / 255;
				const bNorm = b / 255;
				const max = Math.max(rNorm, gNorm, bNorm);
				const min = Math.min(rNorm, gNorm, bNorm);
				const delta = max - min;
				
				let h = 0;
				let s = 0;
				const l = (max + min) / 2;
				
				if (delta !== 0) {
					s = l > 0.5 ? delta / (2 - max - min) : delta / (max + min);
					if (max === rNorm) {
						h = ((gNorm - bNorm) / delta + (gNorm < bNorm ? 6 : 0)) / 6;
					} else if (max === gNorm) {
						h = ((bNorm - rNorm) / delta + 2) / 6;
					} else {
						h = ((rNorm - gNorm) / delta + 4) / 6;
					}
				}
				
				const hsl = `hsl(${Math.round(h * 360)}, ${Math.round(s * 100)}%, ${Math.round(l * 100)}%)`;
				const rgbString = `rgb(${r}, ${g}, ${b})`;
				
				return { hex, rgb: rgbString, hsl, r, g, b };
			};

			/**
			 * Convert sRGB (0-255) to OKLCH string for display/copy (scale tokens and any var not in theme map).
			 * Uses OKLab/OKLCH conversion per W3C CSS Color 4.
			 * @param {number} r - Red 0-255
			 * @param {number} g - Green 0-255
			 * @param {number} b - Blue 0-255
			 * @returns {string} oklch(L% C Hdeg)
			 */
			const rgbToOklch = (/** @type {number} */ r, /** @type {number} */ g, /** @type {number} */ b) => {
				const rLin = r / 255;
				const gLin = g / 255;
				const bLin = b / 255;
				// sRGB to linear
				const toLinear = (c) => c <= 0.04045 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
				const lr = toLinear(rLin);
				const lg = toLinear(gLin);
				const lb = toLinear(bLin);
				// Linear sRGB to LMS (OKLab matrix)
				const l = 0.4122214708 * lr + 0.5363325363 * lg + 0.0514459929 * lb;
				const m = 0.2119034982 * lr + 0.6806995451 * lg + 0.1073969566 * lb;
				const s = 0.0883024619 * lr + 0.2817188376 * lg + 0.6299787005 * lb;
				const lp = Math.cbrt(l);
				const mp = Math.cbrt(m);
				const sp = Math.cbrt(s);
				// LMS to OKLab
				const L = 0.2104542553 * lp + 0.7936177850 * mp - 0.0040720468 * sp;
				const a = 1.9779984951 * lp - 2.4285922050 * mp + 0.4505937099 * sp;
				const b_ = 0.0259040371 * lp + 0.7827717662 * mp - 0.8086757660 * sp;
				// OKLab to OKLCH
				const C = Math.sqrt(a * a + b_ * b_);
				let H = Math.atan2(b_, a) * (180 / Math.PI);
				if (H < 0) H += 360;
				const Lpct = Math.round(L * 100);
				const Cround = Math.round(C * 1000) / 1000;
				const Hround = Math.round(H * 10) / 10;
				return `oklch(${Lpct}% ${Cround} ${Hround}deg)`;
			};
			
			/**
			 * Parse any rgb/rgba string from getComputedStyle (comma or space-separated).
			 * @param {string} str - e.g. "rgb(1,2,3)", "rgba(1,2,3,0.5)", "rgb(1 2 3)", "rgba(1 2 3 / 0.5)"
			 * @returns {{r: number, g: number, b: number} | null}
			 */
			const parseRgbString = (/** @type {string} */ str) => {
				if (!str || typeof str !== 'string') return null;
				if (str.trim().toLowerCase() === 'transparent') return null;
				// Comma-separated: rgb(r,g,b) or rgba(r,g,b,a)
				let match = str.match(/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*[\d.]+)?\s*\)/);
				if (match) {
					const r = parseInt(match[1], 10);
					const g = parseInt(match[2], 10);
					const b = parseInt(match[3], 10);
					if (!isNaN(r) && !isNaN(g) && !isNaN(b)) return { r, g, b };
				}
				// Space-separated: rgb(r g b) or rgba(r g b / a)
				match = str.match(/rgba?\(\s*(\d+)\s+(\d+)\s+(\d+)(?:\s*\/\s*[\d.]+)?\s*\)/);
				if (match) {
					const r = parseInt(match[1], 10);
					const g = parseInt(match[2], 10);
					const b = parseInt(match[3], 10);
					if (!isNaN(r) && !isNaN(g) && !isNaN(b)) return { r, g, b };
				}
				return null;
			};

			/**
			 * Parse a raw CSS value into oklch(L% C Hdeg) for oklchToRgb. Handles L as % or 0-1, H with or without deg.
			 * Does not match oklch(from var(...)...).
			 * @param {string} raw - e.g. "oklch(18% 0.012 264deg)" or "oklch(0.18 0.012 264)"
			 * @returns {string | null} "oklch(L% C Hdeg)" or null
			 */
			const parseOklchFromRaw = (/** @type {string} */ raw) => {
				if (!raw || typeof raw !== 'string') return null;
				const t = raw.trim();
				if (t.includes('from ')) return null; // relative color, can't parse
				// L as percentage: oklch(18% 0.012 264deg) or oklch(18% 0.012 264)
				let m = t.match(/^oklch\(\s*([\d.]+)%\s+([\d.]+)\s+([\d.]+)(?:deg)?\s*\)$/);
				if (m) {
					const L = parseFloat(m[1]);
					const C = parseFloat(m[2]);
					const H = parseFloat(m[3]);
					if (!isNaN(L) && !isNaN(C) && !isNaN(H)) return `oklch(${L}% ${C} ${H}deg)`;
				}
				// L as 0-1: oklch(0.18 0.012 264) or oklch(0.18 0.012 264deg)
				m = t.match(/^oklch\(\s*([\d.]+)\s+([\d.]+)\s+([\d.]+)(?:deg)?\s*\)$/);
				if (m) {
					const L = parseFloat(m[1]);
					const C = parseFloat(m[2]);
					const H = parseFloat(m[3]);
					if (!isNaN(L) && !isNaN(C) && !isNaN(H) && L <= 1) return `oklch(${L * 100}% ${C} ${H}deg)`;
				}
				return null;
			};

			/**
			 * Resolve a CSS color variable to RGB. When sourceElement is the .color-card that paints this color,
			 * we read its computed background so scale tokens (e.g. --color-error-400) get the real value.
			 * @param {string} colorVar - e.g. "--background", "--accent", "--color-error-400"
			 * @param {Element | null} [sourceElement] - .color-card that has background = this color (--color-card-bg)
			 * @returns {{hex: string, rgb: string, hsl: string, r: number, g: number, b: number} | null}
			 */
			const resolveColorVar = (/** @type {string} */ colorVar, /** @type {Element | null} */ sourceElement = null) => {
				try {
					// 1) If we have the element that displays this color, read its computed background (works for scale tokens)
					if (sourceElement) {
						const bg = window.getComputedStyle(sourceElement).backgroundColor;
						const rgb = parseRgbString(bg);
						if (rgb) return rgbToFormats(rgb.r, rgb.g, rgb.b);
					}

					// 2) Theme map for semantic/core vars â€“ CSS uses var(--cyan) etc., so we use our map
					const oklch = getOklchValue(colorVar);
					if (oklch) {
						const rgbFromMap = oklchToRgb(oklch);
						if (rgbFromMap) return rgbToFormats(rgbFromMap.r, rgbFromMap.g, rgbFromMap.b);
					}

					// 3) Scale tokens (--color-accent-50 etc.): derive from base semantic color when browser doesn't resolve oklch(from var(...)...)
					const formula = scaleTokenFormulas[colorVar];
					if (formula) {
						const baseOklch = getOklchValue(formula.baseVar);
						if (baseOklch) {
							if (formula.L === null) {
								const rgbBase = oklchToRgb(baseOklch);
								if (rgbBase) return rgbToFormats(rgbBase.r, rgbBase.g, rgbBase.b);
							} else {
								const H = getHueFromOklch(baseOklch);
								if (H !== null) {
									const derivedOklch = `oklch(${Math.round(formula.L * 100)}% ${formula.C} ${H}deg)`;
									const rgbDerived = oklchToRgb(derivedOklch);
									if (rgbDerived) return rgbToFormats(rgbDerived.r, rgbDerived.g, rgbDerived.b);
								}
							}
						}
					}

					// 4) Temp element fallback
					const temp = document.createElement('div');
					temp.style.setProperty('background-color', `var(${colorVar})`);
					temp.style.position = 'absolute';
					temp.style.left = '-9999px';
					temp.style.width = '1px';
					temp.style.height = '1px';
					temp.style.pointerEvents = 'none';
					temp.style.top = '0';
					document.documentElement.appendChild(temp);
					void temp.offsetHeight;
					const bg = window.getComputedStyle(temp).backgroundColor;
					document.documentElement.removeChild(temp);

					const rgb = parseRgbString(bg);
					if (rgb) return rgbToFormats(rgb.r, rgb.g, rgb.b);

					// 5) getPropertyValue from root (simple oklch only)
					const raw = getComputedStyle(document.documentElement).getPropertyValue(colorVar).trim();
					const oklchStr = parseOklchFromRaw(raw);
					if (oklchStr) {
						const rgbFromOklch = oklchToRgb(oklchStr);
						if (rgbFromOklch) return rgbToFormats(rgbFromOklch.r, rgbFromOklch.g, rgbFromOklch.b);
					}

					return null;
				} catch (e) {
					return null;
				}
			};
			
			const updateColorValues = () => {
				const swatches = document.querySelectorAll('[data-color-var]');
				
				if (swatches.length === 0) {
					return;
				}
				
				swatches.forEach((swatch) => {
					try {
						const colorVar = swatch.getAttribute('data-color-var');
						if (!colorVar) return;
						
						// Pass the card so we read its computed background (same color as --color-card-bg); fixes scale tokens like --color-error-400
						const card = swatch.closest('.color-card');
						const computed = resolveColorVar(colorVar, card);
						// OKLCH: derive from resolved RGB for every color so all swatches show OKLCH, Hex, RGB, HSL
						let oklch = '';
						if (computed && typeof computed.r === 'number' && typeof computed.g === 'number' && typeof computed.b === 'number') {
							oklch = rgbToOklch(computed.r, computed.g, computed.b);
						} else {
							oklch = getOklchValue(colorVar);
						}
						const cssVar = `var(${colorVar})`;
						
						let value = '';
						let formatLabel = '';
						
						switch (currentFormat) {
							case 'oklch':
								value = oklch || cssVar;
								formatLabel = 'OKLCH';
								break;
							case 'hex':
								value = computed ? computed.hex : (oklch || cssVar);
								formatLabel = 'Hex';
								break;
							case 'rgb':
								value = computed ? computed.rgb : (oklch || cssVar);
								formatLabel = 'RGB';
								break;
							case 'hsl':
								value = computed ? computed.hsl : (oklch || cssVar);
								formatLabel = 'HSL';
								break;
							case 'cssvar':
								value = cssVar;
								formatLabel = 'CSS Variable';
								break;
							default:
								value = oklch || cssVar;
								formatLabel = 'OKLCH';
						}
						
						// Ensure we have a value - if not, skip this swatch
						if (!value || value.trim() === '') {
							return;
						}
						
						// Find the copy button (card already from above)
						const colorVarName = colorVar.replace('--', '');
						let copyButton = document.getElementById(`copy-color-${colorVarName}`)
							|| swatch.querySelector('[data-color-copy]')
							|| swatch.querySelector('.copy-to-clipboard')
							|| (card && card.querySelector('[data-color-copy]'))
							|| (card && card.querySelector('.copy-to-clipboard'));
						
						if (!copyButton) {
							return;
						}
						
						// Update the data attributes (this triggers MutationObserver)
						copyButton.setAttribute('data-copy-format', formatLabel);
						copyButton.setAttribute('data-copy-value', value);
						
						// Directly update the text span to ensure it's visible immediately
						const textSpan = copyButton.querySelector('.copy-to-clipboard__text');
						if (textSpan) {
							textSpan.textContent = value;
						}
						
						// Force a re-render by triggering a custom event
						copyButton.dispatchEvent(new CustomEvent('value-updated', { 
							bubbles: false, 
							detail: { value, format: formatLabel } 
						}));
					} catch (error) {
						// Silently continue if there's an error with this swatch
						console.warn('Error updating color value:', error);
					}
				});
			};
			
			// Tab switching
			const tabs = document.querySelectorAll('.color-format-tab');
			
			tabs.forEach((tab) => {
				tab.addEventListener('click', () => {
					const format = tab.getAttribute('data-format');
					if (!format) return;
					
					currentFormat = format;
					
					// Update tab states and tabindex for accessibility
					tabs.forEach((t) => {
						t.setAttribute('aria-selected', 'false');
						t.setAttribute('tabindex', '-1');
					});
					tab.setAttribute('aria-selected', 'true');
					tab.setAttribute('tabindex', '0');
					
					// Update color values
					updateColorValues();
				});
				
				tab.addEventListener('keydown', (e) => {
					if (e && 'key' in e) {
						const keyEvent = e;
						if (keyEvent.key === 'Enter' || keyEvent.key === ' ') {
							keyEvent.preventDefault();
							const tabElement = tab;
							if (tabElement && 'click' in tabElement && typeof tabElement.click === 'function') {
								tabElement.click();
							}
						}
					}
				});
			});
			
			// Wait for CopyToClipboard components to be initialized
			const waitForComponents = (callback, maxAttempts = 30, attempt = 0) => {
				const buttons = document.querySelectorAll('[data-color-copy]');
				const swatches = document.querySelectorAll('[data-color-var]');
				
				// Ensure we have both swatches and buttons
				if (swatches.length === 0 || buttons.length === 0) {
					if (attempt < maxAttempts) {
						setTimeout(() => waitForComponents(callback, maxAttempts, attempt + 1), 100);
					} else {
						// Even if not all found, try to run anyway
						callback();
					}
					return;
				}
				
				// Check if buttons are initialized (CopyToClipboard sets data-copy-initialized)
				const initializedCount = Array.from(buttons).filter(btn => btn.hasAttribute('data-copy-initialized')).length;
				
				// Run if all are initialized, or if we've waited long enough
				if (initializedCount === buttons.length || attempt >= maxAttempts) {
					callback();
					return;
				}
				
				setTimeout(() => waitForComponents(callback, maxAttempts, attempt + 1), 100);
			};
			
			// Initial update - ensure everything is ready (theme may apply after DOM ready)
			const runInitialUpdate = () => {
				waitForComponents(() => {
					updateColorValues();
					setTimeout(updateColorValues, 100);
					setTimeout(updateColorValues, 300);
					setTimeout(updateColorValues, 600);
					setTimeout(updateColorValues, 1000);
					setTimeout(updateColorValues, 1500);
				});
			};
			
			// Start initialization
			if (document.readyState === 'loading') {
				document.addEventListener('DOMContentLoaded', () => {
					setTimeout(runInitialUpdate, 200);
				});
			} else {
				setTimeout(runInitialUpdate, 200);
			}
			
			// Update when theme changes (both event names used in the codebase)
			const scheduleColorUpdate = () => setTimeout(() => updateColorValues(), 100);
			document.addEventListener('themechange', scheduleColorUpdate);
			window.addEventListener('rizzo-theme-change', scheduleColorUpdate);
			window.addEventListener('storage', scheduleColorUpdate);
			
			let lastTheme = getCurrentTheme();
			setInterval(() => {
				const currentTheme = getCurrentTheme();
				if (currentTheme !== lastTheme) {
					lastTheme = currentTheme;
					setTimeout(() => updateColorValues(), 100);
				}
			}, 500);
		};
		
		// Start initialization - wait for DOM
		if (document.readyState === 'loading') {
			document.addEventListener('DOMContentLoaded', init);
		} else {
			// Small delay to ensure all components are loaded
			setTimeout(init, 50);
		}
	})();
</script>

---
import DocsLayout from '../../../../layouts/DocsLayout.astro';
import CodeBlock from '../../../../components/CodeBlock.astro';
import AddComponentTabs from '../../../../components/AddComponentTabs.astro';
import BackToTop from '../../../../components/BackToTop.astro';

const copyableHtml = `<div class="back-to-top" data-back-to-top data-threshold="400" aria-hidden="true">
  <button type="button" class="back-to-top__btn" aria-label="Back to top" data-back-to-top-btn>
    <span class="back-to-top__icon" aria-hidden="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 15-6-6-6 6"/></svg>
    </span>
  </button>
</div>`;

const copyableJs = `(function initBackToTop() {
  var wrapper = document.querySelector('[data-back-to-top]');
  var btn = wrapper && wrapper.querySelector('[data-back-to-top-btn]');
  if (!wrapper || !btn) return;
  var threshold = Number(wrapper.getAttribute('data-threshold')) || 400;
  function updateVisibility() {
    var visible = window.scrollY > threshold;
    wrapper.setAttribute('data-visible', visible ? 'true' : 'false');
    wrapper.setAttribute('aria-hidden', visible ? 'false' : 'true');
  }
  function scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); }
  window.addEventListener('scroll', updateVisibility, { passive: true });
  btn.addEventListener('click', scrollToTop);
  updateVisibility();
})();`;
---

<DocsLayout title="Back to Top — Vanilla" description="Fixed button that appears on scroll and scrolls back to top. Copyable HTML and script.">
  <section>
    <h2>Back to Top</h2>
    <p>Fixed button that appears after the user scrolls down and scrolls the page back to the top on click. Same behavior as <a href="/docs/components/back-to-top">Astro</a> and <a href="/docs/svelte/components/back-to-top">Svelte</a>. Ensure Rizzo CSS is loaded and include the init script below (or use the scaffold <code>js/main.js</code> which wires <code>[data-back-to-top]</code>).</p>
    <AddComponentTabs componentName="Back to Top" />
    <div class="example">
      <div class="example-title">Live example</div>
      <p>Scroll down to see the button, then click it to scroll back to top.</p>
      <BackToTop threshold={200} />
    </div>

    <h3>HTML</h3>
    <p>Copy the markup below. Use <code>data-threshold</code> to set the scroll threshold in pixels (default 400).</p>
    <CodeBlock code={copyableHtml} language="html" />

    <h3>JavaScript</h3>
    <p>Run once (e.g. on DOMContentLoaded) to wire visibility and click-to-scroll.</p>
    <CodeBlock code={copyableJs} language="javascript" />

    <p><strong>Astro / Svelte:</strong> <a href="/docs/components/back-to-top">Astro</a> · <a href="/docs/svelte/components/back-to-top">Svelte</a></p>
  </section>
</DocsLayout>

<style>
  .example { margin: var(--spacing-6) 0; padding: var(--spacing-4); background: var(--background-alt); border: 1px solid var(--border); border-radius: var(--radius-lg); }
  .example-title { font-size: var(--font-size-sm); font-weight: var(--font-weight-medium); color: var(--text-dim); margin-bottom: var(--spacing-3); text-transform: uppercase; letter-spacing: var(--letter-spacing-wider); }
</style>

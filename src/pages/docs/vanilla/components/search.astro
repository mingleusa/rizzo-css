---
import DocsLayout from '../../../../layouts/DocsLayout.astro';
import CodeBlock from '../../../../components/CodeBlock.astro';
import AddComponentTabs from '../../../../components/AddComponentTabs.astro';
import SearchComponent from '../../../../components/Search.astro';

const copyableHtml = `<!-- Scaffold/minimal Search: trigger + overlay + input + sample results. Include js/main.js for open/close, focus trap, click-outside. -->
<div class="search" data-search>
  <div class="search__trigger-wrapper">
    <button type="button" class="search__trigger" aria-label="Open search" aria-expanded="false" aria-controls="search-panel">
      <span class="search__trigger-text">Search</span>
    </button>
  </div>
  <div class="search__overlay" id="search-panel" aria-hidden="true" role="dialog" aria-modal="true" data-search-overlay>
    <div class="search__panel">
      <input type="search" class="search__input" placeholder="Search…" aria-label="Search" />
      <div class="search__results" role="listbox" aria-label="Search results">
        <div class="search__empty">
          <p class="search__empty-text">Start typing to search…</p>
        </div>
        <div class="search__results-list" role="group" aria-label="Sample results">
          <a href="#" class="search__result-item" tabindex="-1"><div class="search__result-category">Docs</div><div class="search__result-title">Getting started</div></a>
          <a href="#" class="search__result-item" tabindex="-1"><div class="search__result-category">Docs</div><div class="search__result-title">Components</div></a>
          <a href="#" class="search__result-item" tabindex="-1"><div class="search__result-category">Docs</div><div class="search__result-title">Theming</div></a>
        </div>
      </div>
    </div>
  </div>
</div>`;

const copyableJs = `// Scaffold uses js/main.js: open/close on trigger, click overlay to close, Escape, focus trap in panel.`;
---

<DocsLayout title="Search — Vanilla" description="Search with vanilla HTML or use the same Astro component. Live example and copyable code.">
  <section>
    <h2>Search</h2>
    <p>Search overlay with trigger, Cmd+K/Ctrl+K, and results panel. Same behavior as <a href="/docs/components/search">Astro</a> and <a href="/docs/svelte/components/search">Svelte</a>. Use the live example below or copy the HTML/JS.</p>
    <AddComponentTabs componentName="Search" />
    <h3>Live example</h3>
    <p>Search is in the navbar (top of page) — click the search icon or press <kbd>Ctrl+K</kbd> / <kbd>Cmd+K</kbd>. You can also use the standalone search below.</p>
    <div class="example">
      <div class="example-title">Standalone search (same as navbar)</div>
      <div class="search-doc-example">
        <SearchComponent />
      </div>
    </div>

    <h3>HTML (structure)</h3>
    <p>Copy the markup below. Ensure Rizzo CSS is loaded and <code>js/main.js</code> is included (from the minimal scaffold). It wires the trigger, overlay click-to-close, Escape, and focus trap inside the panel.</p>
    <CodeBlock code={copyableHtml} language="html" />

    <h3>JavaScript (open/close + Cmd+K)</h3>
    <CodeBlock code={copyableJs} language="javascript" />

    <p><a href="/docs/components/search">Astro Search docs</a> — Algolia setup, props, and full script you can port to vanilla.</p>
    <p><strong>Astro / Svelte:</strong> <a href="/docs/components/search">Astro</a> · <a href="/docs/svelte/components/search">Svelte</a></p>
  </section>
</DocsLayout>

<style>
  .example { margin: var(--spacing-6) 0; padding: var(--spacing-4); background: var(--background-alt); border: 1px solid var(--border); border-radius: var(--radius-lg); }
  .example-title { font-size: var(--font-size-sm); font-weight: var(--font-weight-medium); color: var(--text-dim); margin-bottom: var(--spacing-3); text-transform: uppercase; letter-spacing: var(--letter-spacing-wider); }
  .search-doc-example { display: flex; align-items: center; gap: var(--spacing-4); }
  @media (width <= 1023px) {
    .search-doc-example .search__trigger { width: auto; justify-content: center; }
    .search-doc-example .search__trigger-text,
    .search-doc-example .search__kbd { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip-path: inset(50%); white-space: nowrap; border: 0; }
  }
  kbd { display: inline-block; padding: var(--spacing-0-125) var(--spacing-0-375); background: var(--background-alt); border: 1px solid var(--border); border-radius: var(--radius); font-family: var(--font-family-mono); font-size: var(--font-size-xs); }
</style>

---
import DocsLayout from '../../../../layouts/DocsLayout.astro';
import CodeBlock from '../../../../components/CodeBlock.astro';
import Gear from '../../../../components/icons/Gear.astro';

const copyableHtml = `<div class="settings" data-settings aria-hidden="true">
  <div class="settings__overlay" data-settings-overlay aria-hidden="true"></div>
  <div class="settings__panel" role="dialog" aria-modal="true" aria-labelledby="settings-title" aria-hidden="true">
    <div class="settings__header">
      <h2 id="settings-title" class="settings__title">Settings</h2>
      <button type="button" class="settings__close" aria-label="Close settings" data-settings-close>×</button>
    </div>
    <div class="settings__content">
      <section class="settings__section">
        <h3 class="settings__section-title">Theme</h3>
        <div class="settings__control"><!-- Theme switcher dropdown --></div>
      </section>
      <section class="settings__section">
        <h3 class="settings__section-title">Font Size</h3>
        <div class="settings__control">
          <label for="font-size-slider" class="settings__label">
            <span class="settings__label-text">Adjust text size</span>
            <span class="settings__label-value" data-font-size-value>100%</span>
          </label>
          <input type="range" id="font-size-slider" class="settings__slider" min="0.75" max="1.5" step="0.05" value="1" aria-label="Font size" data-font-size-slider style="--slider-progress: 50%;" />
          <div class="settings__slider-labels"><span>Small</span><span>Default</span><span>Large</span></div>
        </div>
      </section>
      <section class="settings__section">
        <h3 class="settings__section-title">Accessibility</h3>
        <div class="settings__control"><!-- Reduce motion, high contrast, scrollbar toggles --></div>
      </section>
    </div>
  </div>
</div>`;

const copyableJs = `// Open/close (Settings component in layout registers these)
window.openSettings();
window.closeSettings();`;
---

<DocsLayout title="Settings — Vanilla" description="Settings panel with vanilla HTML or open via layout. Live example and copyable code.">
  <section>
    <h2>Settings</h2>
    <p>Settings panel for theme, font size, and accessibility. Same behavior as <a href="/docs/components/settings">Astro</a> and <a href="/docs/svelte/components/settings">Svelte</a>. The docs layout already includes Settings; open it with the button below or the <strong>gear icon in the navbar</strong>.</p>

    <h3>Live example</h3>
    <p>Open the Settings panel (gear in navbar or button below — same as navbar).</p>
    <div class="example">
      <div class="example-title">Open Settings</div>
      <button type="button" class="navbar__settings-btn" aria-label="Open settings" onclick="window.openSettings && window.openSettings()">
        <Gear class="navbar__settings-icon" width={20} height={20} />
        <span class="navbar__settings-label">Settings</span>
      </button>
    </div>

    <h3>HTML (structure)</h3>
    <p>Copy the markup below. Ensure Rizzo CSS is loaded. Wire open/close (<code>data-settings-close</code>, overlay click), focus trap, and persistence (theme, <code>fontSizeScale</code>, <code>reducedMotion</code>, <code>highContrast</code>, <code>scrollbarStyle</code>) with your own JS. The <a href="/docs/components/settings">Astro Settings</a> component and Vanilla scaffold show full behavior.</p>
    <CodeBlock code={copyableHtml} language="html" />

    <h3>JavaScript (programmatic open/close)</h3>
    <p>When Settings is in the page (e.g. once in layout), expose:</p>
    <CodeBlock code={copyableJs} language="javascript" />

    <p><a href="/docs/components/settings">Astro Settings docs</a> — full markup, persistence keys, and behavior.</p>
    <p><strong>Astro / Svelte:</strong> <a href="/docs/components/settings">Astro</a> · <a href="/docs/svelte/components/settings">Svelte</a></p>
  </section>
</DocsLayout>

<style>
  .example { margin: var(--spacing-6) 0; padding: var(--spacing-4); background: var(--background-alt); border: 1px solid var(--border); border-radius: var(--radius-lg); }
  .example-title { font-size: var(--font-size-sm); font-weight: var(--font-weight-medium); color: var(--text-dim); margin-bottom: var(--spacing-3); text-transform: uppercase; letter-spacing: var(--letter-spacing-wider); }
</style>

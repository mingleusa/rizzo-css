---
import DocsLayout from '../../layouts/DocsLayout.astro';
import CodeBlock from '../../components/CodeBlock.astro';
---

<DocsLayout title="Accessibility" description="Accessibility guidelines, utilities, and best practices">
	<section>
		<h2 id="checklist-alignment">WCAG 2.2 checklist alignment</h2>
		<p>Rizzo aligns with the <strong>Web Accessibility Checklist</strong> (WCAG 2.2). Every checklist item (HTML, keyboard, forms, content, links, contrast, headings, images, media, ARIA, testing) is implemented or documented. Full mapping: <strong>docs/accessibility-checklist/CHECKLIST_COMPARISON.md</strong>; full prose and patterns: <strong>docs/ACCESSIBILITY.md</strong> (in repo). The key areas below are summarized on this page.</p>
	</section>

	<section>
		<h2 id="accessibility-features">Accessibility Features</h2>
		<p>Rizzo CSS is built with accessibility as a core principle, following WCAG 2.1/2.2 guidelines.</p>
		
		<h3>Keyboard Navigation</h3>
		<p>All interactive components support full keyboard navigation:</p>
		<ul>
			<li>Tab navigation</li>
			<li>Arrow keys for menus</li>
			<li>Enter/Space for activation</li>
			<li>Escape to close/dismiss</li>
		</ul>
		
		<h3>ARIA Attributes</h3>
		<p>Components include proper ARIA attributes:</p>
		<ul>
			<li><code>aria-label</code> - Descriptive labels</li>
			<li><code>aria-expanded</code> - Menu/accordion state</li>
			<li><code>aria-controls</code> - Element relationships</li>
			<li><code>aria-describedby</code> - Additional descriptions</li>
			<li><code>role</code> - Semantic roles</li>
		</ul>
		
		<h3>Focus Management</h3>
		<ul>
			<li>Visible focus indicators using <code>--accent</code> / <code>--accent-fg</code> color</li>
			<li>Focus trapping in modals</li>
			<li>Focus restoration: when you close overlays (Search, Modal, Dropdown), focus returns to the trigger</li>
			<li>Skip links for main content</li>
		</ul>
	</section>
	
	<section>
		<h2 id="utility-classes">Utility Classes</h2>
		
		<h3 id="screen-reader-only">Screen Reader Only</h3>
		<p>Hide content visually but keep it available to screen readers:</p>
		<CodeBlock code={`<span class="sr-only">Screen reader only text</span>`} language="html" />
		<p>Uses modern <code>clip-path: inset(50%)</code> instead of deprecated <code>clip</code> property.</p>
		
		<h3>Focusable Screen Reader Content</h3>
		<p>Make screen reader content focusable:</p>
		<CodeBlock code={`<a href="#content" class="sr-only sr-only-focusable">Skip to content</a>`} language="html" />
		<p>When focused, the content becomes visible and accessible.</p>
		
		<h3>Skip Links</h3>
		<p>Skip to main content link:</p>
		<CodeBlock code={`<a href="#main-content" class="skip-link">Skip to main content</a>`} language="html" />
		
		<h3>Visually Hidden</h3>
		<p>Hide content completely:</p>
		<CodeBlock code={`<span class="visually-hidden">Hidden content</span>`} language="html" />
	</section>
	
	<section>
		<h2 id="focus-styles">Focus Styles</h2>
		<p>All interactive elements have visible focus indicators:</p>
		<CodeBlock code={`:focus-visible {
  outline: 2px solid var(--accent-fg);
  outline-offset: 2px;
}`} language="css" />
	</section>
	
	<section>
		<h2 id="form-accessibility">Form Accessibility</h2>
		
		<h3 id="labels">Labels</h3>
		<p>Always use labels with form inputs:</p>
		<CodeBlock code={`<label for="email">Email</label>
<input type="email" id="email" name="email" />`} language="html" />
		
		<h3>Required Fields</h3>
		<CodeBlock code={`<label for="name" class="required">Name</label>
<input type="text" id="name" name="name" required />`} language="html" />
		
		<h3>Error States</h3>
		<CodeBlock code={`<input type="email" aria-invalid="true" aria-describedby="email-error" />
<span id="email-error" class="error-message">Invalid email address</span>`} language="html" />
		
		<h3>Success States</h3>
		<CodeBlock code={`<span class="success-message">Form submitted successfully</span>`} language="html" />
	</section>
	
	<section>
		<h2 id="responsive-design">Responsive Design</h2>
		<ul>
			<li>Mobile-first approach</li>
			<li>Touch-friendly targets (minimum 44x44px)</li>
			<li>Responsive typography</li>
			<li>Flexible layouts</li>
		</ul>
	</section>
	
	<section>
		<h2 id="color-contrast">Color Contrast</h2>
		<p>All themes meet WCAG AA contrast requirements:</p>
		<ul>
			<li>Normal text: 4.5:1 contrast ratio</li>
			<li>Large text: 3:1 contrast ratio</li>
			<li>Interactive elements: 3:1 contrast ratio</li>
		</ul>
		
		<h3>Contrast-Aware Text Colors</h3>
		<p>Rizzo CSS automatically provides proper contrast through semantic text color variables:</p>
		<ul>
			<li><code>--accent-text</code> - Automatically white or dark based on accent color lightness</li>
			<li><code>--success-text</code> - Contrast-appropriate text for success backgrounds</li>
			<li><code>--warning-text</code> - Dark text for light warning backgrounds</li>
			<li><code>--error-text</code> - Contrast-appropriate text for error backgrounds</li>
			<li><code>--info-text</code> - Contrast-appropriate text for info backgrounds</li>
		</ul>
		<p>All buttons and components using colored backgrounds automatically use these contrast-aware variables to ensure accessibility.</p>
		<h3>Text over images and AAA</h3>
		<p>When text sits on images or gradients, ensure at least 4.5:1 (normal) or 3:1 (large) contrast. Use the Settings <strong>High contrast</strong> toggle for enhanced contrast (helps toward AAA 7:1).</p>
	</section>

	<section>
		<h2 id="content-links-images">Content, links, and images</h2>
		<p>Apply these when authoring content or adding links/images:</p>
		<ul>
			<li><strong>Language changes</strong> — Use <code>lang</code> on phrases in another language (e.g. <code>lang="fr"</code>).</li>
			<li><strong>Links that open in a new window</strong> — Add text like “(opens in new tab)” or an icon with <code>aria-label</code> so users know before activating.</li>
			<li><strong>Images</strong> — Meaningful images need descriptive <code>alt</code>; use <code>alt=""</code> for decorative. Complex images need a description nearby or a link. Avoid images of text; use live text.</li>
			<li><strong>Media</strong> — No autoplay with sound; provide captions/transcripts; ensure custom players have ARIA and keyboard support.</li>
		</ul>
	</section>
	
	<section>
		<h2 id="reduced-motion">Reduced Motion</h2>
		<p>Respects user preferences:</p>
		<CodeBlock code={`@media (prefers-reduced-motion: reduce) {
  /* Animations disabled */
}`} language="css" />
	</section>
	
	<section>
		<h2 id="high-contrast-mode">High Contrast Mode</h2>
		<p>Supports high contrast mode through both media queries and user settings:</p>
		
		<h3>Media Query</h3>
		<CodeBlock code={`@media (prefers-contrast: high) {
  /* Enhanced borders and contrast */
}`} language="css" />
		
		<h3>User Setting</h3>
		<p>The Settings component includes a "High contrast" toggle that applies the <code>.high-contrast</code> class to the document root, enabling enhanced contrast across all components.</p>
		
		<h3>Reduce Motion</h3>
		<p>The Settings component also includes a "Reduce motion" toggle that applies the <code>.reduced-motion</code> class, respecting user motion preferences beyond just the <code>prefers-reduced-motion</code> media query.</p>
	</section>
	
	<section>
		<h2 id="best-practices">Best Practices</h2>
		<ol>
			<li><strong>Always provide labels</strong> - Every form input needs a label</li>
			<li><strong>Use semantic HTML</strong> - Use proper heading hierarchy, landmarks</li>
			<li><strong>Test with keyboard</strong> - Navigate without a mouse</li>
			<li><strong>Test with screen readers</strong> - Use NVDA, JAWS, or VoiceOver</li>
			<li><strong>Check color contrast</strong> - Use tools to verify contrast ratios</li>
			<li><strong>Provide alternatives</strong> - Alt text for images, captions for videos</li>
		</ol>
	</section>
	
	<section>
		<h2 id="testing">Testing</h2>
		<p>We use <strong>axe (WCAG 2/2.1 A &amp; AA)</strong> in CI as the primary automated check (<code>pnpm test:a11y</code>). Manual checks below complete coverage.</p>

		<h3>Keyboard Testing</h3>
		<ul>
			<li>Tab through all interactive elements</li>
			<li>Use arrow keys in menus</li>
			<li>Test Escape key functionality</li>
			<li>Verify focus indicators are visible</li>
		</ul>
		
		<h3>Screen Reader Testing</h3>
		<ul>
			<li>Test with NVDA (Windows)</li>
			<li>Test with JAWS (Windows)</li>
			<li>Test with VoiceOver (macOS/iOS)</li>
			<li>Verify all content is announced</li>
		</ul>

		<h3>Zoom and vision</h3>
		<ul>
			<li><strong>200% zoom</strong> — Test at 200% browser zoom; content should reflow without horizontal scroll.</li>
			<li><strong>Font size</strong> — Use the Settings font-size slider or OS settings.</li>
			<li><strong>Color blindness / blurry vision</strong> — Use DevTools (e.g. Emulate vision deficiencies) to ensure info isn’t conveyed by color alone.</li>
		</ul>
		
		<h3>Automated and one-off tools</h3>
		<ul>
			<li>axe DevTools</li>
			<li>WAVE</li>
			<li>Lighthouse</li>
			<li>Pa11y</li>
		</ul>
	</section>
	
	<section>
		<h2 id="resources">Resources</h2>
		<ul>
			<li><a href="https://www.w3.org/WAI/WCAG21/quickref/" target="_blank" rel="noopener">WCAG 2.1 Guidelines<span class="sr-only"> (opens in new tab)</span></a></li>
			<li><a href="https://webaim.org/" target="_blank" rel="noopener">WebAIM<span class="sr-only"> (opens in new tab)</span></a></li>
			<li><a href="https://www.a11yproject.com/" target="_blank" rel="noopener">A11y Project<span class="sr-only"> (opens in new tab)</span></a></li>
			<li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility" target="_blank" rel="noopener">MDN Accessibility<span class="sr-only"> (opens in new tab)</span></a></li>
		</ul>
	</section>
</DocsLayout>

---
import Layout from './Layout.astro';
import FrameworkSwitcher from '../components/FrameworkSwitcher.astro';
import { FRAMEWORK_STORAGE_KEY } from '../config/frameworks.js';

interface Props {
	title: string;
	description?: string;
	class?: string;
}

const { title, description, class: className = '' } = Astro.props;
const docsClass = className ? `docs ${className}` : 'docs';
const currentPath = Astro.url.pathname;
const isDocsIndex = currentPath === '/docs' || currentPath === '/docs/';
---

<Layout>
	<div class={docsClass}>
		<div class="docs__container">
			<header class="docs__header">
				<FrameworkSwitcher currentPath={currentPath} />
				<h1 class="docs__title">{title}</h1>
				{description && <p class="docs__description">{description}</p>}
			</header>
			
			<div class="docs__content">
				<slot />
			</div>
		</div>
	</div>
</Layout>
<script define:vars={{ FRAMEWORK_STORAGE_KEY, isDocsIndex }}>
	if (isDocsIndex && typeof localStorage !== 'undefined') {
		try {
			const preferred = localStorage.getItem(FRAMEWORK_STORAGE_KEY);
			if (preferred === 'svelte') window.location.replace('/docs/svelte');
		} catch (_) {}
	}
</script>
<style>
	.docs {
		padding: 2rem 1rem;
		min-height: calc(100vh - 4rem);
	}
	
	.docs__container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 0 1rem;
	}
	
	.docs__header {
		margin-bottom: 3rem;
		padding-bottom: 2rem;
		border-bottom: 1px solid var(--border);
	}
	
	.docs__title {
		font-size: var(--font-size-4xl);
		font-weight: var(--font-weight-bold);
		color: var(--text);
		margin: 0 0 1rem 0;
		line-height: var(--line-height-tight);
	}
	
	.docs__description {
		font-size: var(--font-size-lg);
		color: var(--text-dim);
		margin: 0;
		line-height: var(--line-height-relaxed);
	}
	
	.docs__content {
		color: var(--text);
		line-height: var(--line-height-relaxed);
	}
	
	/* Documentation typography */
	.docs__content :global(h2) {
		font-size: var(--font-size-3xl);
		font-weight: var(--font-weight-bold);
		margin-top: 3rem;
		margin-bottom: 1.5rem;
		color: var(--text);
		padding-bottom: 0.5rem;
		border-bottom: 1px solid var(--border);
	}
	
	.docs__content :global(h3) {
		font-size: var(--font-size-2xl);
		font-weight: var(--font-weight-semibold);
		margin-top: 2rem;
		margin-bottom: 1rem;
		color: var(--text);
	}
	
	.docs__content :global(h4) {
		font-size: var(--font-size-xl);
		font-weight: var(--font-weight-semibold);
		margin-top: 1.5rem;
		margin-bottom: 0.75rem;
		color: var(--text);
	}
	
	.docs__content :global(p) {
		margin-bottom: 1.25rem;
	}
	
	.docs__content :global(ul),
	.docs__content :global(ol) {
		margin-bottom: var(--spacing-5);
		padding-left: var(--spacing-8);
	}
	
	.docs__content :global(li) {
		margin-bottom: var(--spacing-2);
	}
	
	.docs__content :global(code) {
		background-color: var(--background-alt);
		color: var(--accent);
		padding: var(--spacing-0-125) var(--spacing-0-375);
		border-radius: var(--radius);
		font-family: var(--font-family-mono);
		font-size: 0.9em;
	}
	
	.docs__content :global(pre) {
		background-color: var(--background-alt);
		border: 1px solid var(--border);
		border-radius: var(--radius-lg);
		padding: var(--spacing-6);
		overflow-x: auto;
		margin-bottom: var(--spacing-6);
	}
	
	.docs__content :global(pre code) {
		background-color: transparent;
		color: var(--text);
		padding: 0;
	}
	
	.docs__content :global(blockquote) {
		border-left: var(--spacing-1) solid var(--accent);
		padding-left: var(--spacing-6);
		margin: var(--spacing-6) 0;
		color: var(--text-dim);
		font-style: italic;
	}
	
	.docs__content :global(table) {
		width: 100%;
		border-collapse: collapse;
		margin-bottom: var(--spacing-6);
	}
	
	.docs__content :global(th),
	.docs__content :global(td) {
		padding: var(--spacing-3);
		text-align: left;
		border-bottom: 1px solid var(--border);
	}
	
	.docs__content :global(th) {
		font-weight: var(--font-weight-semibold);
		background-color: var(--background-alt);
	}
	
	.docs__content :global(a) {
		color: var(--accent);
		text-decoration: none;
		transition: color var(--transition-base);
	}
	
	.docs__content :global(a:hover) {
		color: var(--accent-hover);
		text-decoration: underline;
	}
	
	.docs__content :global(hr) {
		border: none;
		border-top: 1px solid var(--border);
		margin: var(--spacing-8) 0;
	}
	
	/* Example sections */
	.docs__content :global(.example) {
		background-color: var(--background-alt);
		border: 1px solid var(--border);
		border-radius: var(--radius-lg);
		padding: var(--spacing-6);
		margin: var(--spacing-6) 0;
	}
	
	.docs__content :global(.example-title) {
		font-size: var(--font-size-sm);
		font-weight: var(--font-weight-semibold);
		text-transform: uppercase;
		letter-spacing: var(--letter-spacing-wide);
		color: var(--text-dim);
		margin-bottom: var(--spacing-4);
	}
	
	.docs__content :global(section) {
		margin-bottom: var(--spacing-12);
	}
	
	.docs__content :global(section:last-child) {
		margin-bottom: 0;
	}
</style>

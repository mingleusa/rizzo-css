<!DOCTYPE html>
<html lang="en" data-theme="{{DATA_THEME}}">{{THEME_LIST_COMMENT}}
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{TITLE}}</title>
  <!-- Theme flash prevention: apply saved theme/settings before first paint (same as main site) -->
  <script>
    (function() {
      try {
        var savedTheme = localStorage.getItem('theme');
        var defaultDark = 'github-dark-classic';
        var defaultLight = 'github-light';
        var resolvedTheme;
        if (!savedTheme) {
          var initialTheme = document.documentElement.getAttribute('data-theme');
          resolvedTheme = initialTheme || (window.matchMedia('(prefers-color-scheme: dark)').matches ? defaultDark : defaultLight);
        } else if (savedTheme === 'system') {
          resolvedTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? defaultDark : defaultLight;
        } else {
          resolvedTheme = savedTheme;
        }
        document.documentElement.setAttribute('data-theme', resolvedTheme);
        var savedFontScale = localStorage.getItem('fontSizeScale');
        if (savedFontScale) {
          document.documentElement.style.setProperty('--font-size-scale', savedFontScale);
        }
        if (localStorage.getItem('reducedMotion') === 'true') {
          document.documentElement.classList.add('reduced-motion');
        }
        if (localStorage.getItem('highContrast') === 'true') {
          document.documentElement.classList.add('high-contrast');
        }
        var savedScrollbarStyle = localStorage.getItem('scrollbarStyle') || 'thin';
        if (savedScrollbarStyle === 'thick') {
          document.documentElement.classList.add('scrollbar-thick');
        } else if (savedScrollbarStyle === 'hidden') {
          document.documentElement.classList.add('scrollbar-hidden', 'hide-scrollbars');
        }
        if (!savedScrollbarStyle && localStorage.getItem('hideScrollbars') === 'true') {
          document.documentElement.classList.add('scrollbar-hidden', 'hide-scrollbars');
          localStorage.setItem('scrollbarStyle', 'hidden');
        }
      } catch (e) {}
    })();
  </script>
  <!-- Toast: showToast, removeToast, removeAllToasts (same as main site) -->
  <script>
    (function() {
      if (typeof window === 'undefined' || window.showToast) return;
      function showToast(message, options) {
        if (!message) return null;
        options = options || {};
        var variant = options.variant || 'info';
        var position = options.position || 'top-right';
        var autoDismiss = options.autoDismiss !== undefined ? options.autoDismiss : 5000;
        var dismissible = options.dismissible !== undefined ? options.dismissible : true;
        var toastId = 'toast-' + Math.random().toString(36).substr(2, 9);
        function createToast() {
          if (!document.body) return;
          var containerId = 'toast-container-' + position;
          var container = document.getElementById(containerId);
          if (!container) {
            container = document.createElement('div');
            container.id = containerId;
            container.className = 'toast-container toast-container--' + position;
            container.style.cssText = 'display:flex;visibility:visible;z-index:1100;';
            document.body.appendChild(container);
          }
          var toast = document.createElement('div');
          toast.id = toastId;
          toast.className = 'alert alert--' + variant;
          toast.setAttribute('role', 'alert');
          toast.setAttribute('aria-live', 'polite');
          toast.style.cssText = 'display:flex;visibility:visible;opacity:0;transition:opacity 0.3s ease-out, transform 0.3s ease-out;';
          var isRight = position.indexOf('right') !== -1;
          var isLeft = position.indexOf('left') !== -1;
          toast.style.transform = isRight ? 'translateX(100%)' : isLeft ? 'translateX(-100%)' : 'translateY(-100%)';
          var content = document.createElement('div');
          content.className = 'alert__content';
          content.textContent = message;
          toast.appendChild(content);
          var closeBtn;
          if (dismissible) {
            closeBtn = document.createElement('button');
            closeBtn.type = 'button';
            closeBtn.className = 'alert__close';
            closeBtn.setAttribute('aria-label', 'Dismiss toast');
            closeBtn.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="4" x2="12" y2="12"></line><line x1="12" y1="4" x2="4" y2="12"></line></svg>';
            toast.appendChild(closeBtn);
            closeBtn.addEventListener('click', function() {
              toast.style.opacity = '0';
              toast.style.transform = isRight ? 'translateX(100%)' : isLeft ? 'translateX(-100%)' : 'translateY(-100%)';
              setTimeout(function() {
                if (toast.parentNode) toast.remove();
                if (container.children.length === 0) container.remove();
              }, 300);
            });
          }
          container.appendChild(toast);
          requestAnimationFrame(function() {
            toast.offsetHeight;
            if (variant === 'warning') {
              toast.style.color = 'var(--warning-text)';
              content.style.color = 'var(--warning-text)';
              if (closeBtn) closeBtn.style.color = 'var(--warning-text)';
            }
            setTimeout(function() {
              requestAnimationFrame(function() {
                toast.style.opacity = '1';
                toast.style.transform = isRight || isLeft ? 'translateX(0)' : 'translateY(0)';
              });
            }, 10);
          });
          if (autoDismiss > 0) {
            setTimeout(function() {
              if (toast.parentNode) {
                toast.style.opacity = '0';
                toast.style.transform = isRight ? 'translateX(100%)' : isLeft ? 'translateX(-100%)' : 'translateY(-100%)';
                setTimeout(function() {
                  if (toast.parentNode) toast.remove();
                  if (container.children.length === 0) container.remove();
                }, 300);
              }
            }, autoDismiss);
          }
        }
        if (document.body) createToast();
        else document.addEventListener('DOMContentLoaded', createToast);
        return toastId;
      }
      function removeToast(toastId) {
        var toast = document.getElementById(toastId);
        if (toast) {
          var container = toast.parentElement;
          var position = container ? container.id.replace('toast-container-', '') : 'top-right';
          toast.style.opacity = '0';
          toast.style.transform = position.indexOf('right') !== -1 ? 'translateX(100%)' : position.indexOf('left') !== -1 ? 'translateX(-100%)' : 'translateY(-100%)';
          setTimeout(function() {
            if (toast.parentNode) toast.remove();
            if (container && container.classList.contains('toast-container') && container.children.length === 0) container.remove();
          }, 300);
        }
      }
      function removeAllToasts() {
        document.querySelectorAll('.toast-container').forEach(function(c) {
          c.querySelectorAll('.alert').forEach(function(t) {
            t.style.opacity = '0';
            t.style.transform = 'translateY(-10px)';
          });
          setTimeout(function() { c.remove(); }, 300);
        });
      }
      window.showToast = showToast;
      window.removeToast = removeToast;
      window.removeAllToasts = removeAllToasts;
    })();
  </script>
  <link rel="stylesheet" href="{{LINK_HREF}}" />
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <header class="container flex flex-wrap items-center justify-between gap-4" style="padding-top: var(--spacing-4); padding-bottom: var(--spacing-4); border-bottom: 1px solid var(--border);">
    <a href="#" class="font-semibold" style="font-size: var(--font-size-lg); color: var(--text); text-decoration: none;">{{TITLE}}</a>
    <div class="flex items-center gap-3 flex-wrap">
      <label for="theme-select" class="sr-only">Theme</label>
      <select id="theme-select" class="form-control" style="width: auto; min-width: 12rem;" aria-label="Theme">
        <option value="system">System</option>
        <optgroup label="Dark themes">
          <option value="github-dark-classic">GitHub Dark Classic</option>
          <option value="shades-of-purple">Shades of Purple</option>
          <option value="sandstorm-classic">Sandstorm Classic</option>
          <option value="rocky-blood-orange">Rocky Blood Orange</option>
          <option value="minimal-dark-neon-yellow">Minimal Dark Neon Yellow</option>
          <option value="hack-the-box">Hack The Box</option>
          <option value="pink-cat-boo">Pink Cat Boo</option>
        </optgroup>
        <optgroup label="Light themes">
          <option value="github-light">GitHub Light</option>
          <option value="red-velvet-cupcake">Red Velvet Cupcake</option>
          <option value="orangy-one-light">Orangy One Light</option>
          <option value="sunflower">Sunflower</option>
          <option value="green-breeze-light">Green Breeze Light</option>
          <option value="cute-pink">Cute Pink</option>
          <option value="semi-light-purple">Semi Light Purple</option>
        </optgroup>
      </select>
      <button type="button" class="btn btn-outline" aria-label="Open settings" onclick="window.openSettings && window.openSettings()">Settings</button>
    </div>
  </header>

  <!-- Settings panel (same structure as main site; CSS from Rizzo) -->
  <div class="settings" data-settings aria-hidden="true">
    <div class="settings__overlay" data-settings-overlay aria-hidden="true"></div>
    <div class="settings__panel" role="dialog" aria-modal="true" aria-labelledby="settings-title" aria-hidden="true">
      <div class="settings__header">
        <h2 id="settings-title" class="settings__title">Settings</h2>
        <button type="button" class="settings__close" aria-label="Close settings" data-settings-close>
          <svg width="20" height="20" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="4" x2="12" y2="12"></line><line x1="12" y1="4" x2="4" y2="12"></line></svg>
        </button>
      </div>
      <div class="settings__content">
        <section class="settings__section">
          <h3 class="settings__section-title">Theme</h3>
          <div class="settings__control">
            <label for="settings-theme" class="settings__label">Theme</label>
            <select id="settings-theme" class="form-control" aria-label="Theme" data-settings-theme style="width: 100%;">
              <option value="system">System</option>
              <optgroup label="Dark themes">
                <option value="github-dark-classic">GitHub Dark Classic</option>
                <option value="shades-of-purple">Shades of Purple</option>
                <option value="sandstorm-classic">Sandstorm Classic</option>
                <option value="rocky-blood-orange">Rocky Blood Orange</option>
                <option value="minimal-dark-neon-yellow">Minimal Dark Neon Yellow</option>
                <option value="hack-the-box">Hack The Box</option>
                <option value="pink-cat-boo">Pink Cat Boo</option>
              </optgroup>
              <optgroup label="Light themes">
                <option value="github-light">GitHub Light</option>
                <option value="red-velvet-cupcake">Red Velvet Cupcake</option>
                <option value="orangy-one-light">Orangy One Light</option>
                <option value="sunflower">Sunflower</option>
                <option value="green-breeze-light">Green Breeze Light</option>
                <option value="cute-pink">Cute Pink</option>
                <option value="semi-light-purple">Semi Light Purple</option>
              </optgroup>
            </select>
          </div>
        </section>
        <section class="settings__section">
          <h3 class="settings__section-title">Font Size</h3>
          <div class="settings__control">
            <label for="font-size-slider" class="settings__label">
              <span class="settings__label-text">Adjust text size</span>
              <span class="settings__label-value" data-font-size-value>100%</span>
            </label>
            <input type="range" id="font-size-slider" class="settings__slider" min="0.75" max="1.5" step="0.05" value="1" aria-label="Font size" data-font-size-slider style="--slider-progress: 50%;" />
            <div class="settings__slider-labels"><span>Small</span><span>Default</span><span>Large</span></div>
          </div>
        </section>
        <section class="settings__section">
          <h3 class="settings__section-title">Accessibility</h3>
          <div class="settings__control">
            <label class="settings__checkbox-label">
              <input type="checkbox" class="settings__checkbox" data-reduced-motion aria-label="Reduce motion" />
              <span>Reduce motion</span>
            </label>
            <p class="settings__help-text">Minimize animations and transitions</p>
          </div>
          <div class="settings__control">
            <label class="settings__checkbox-label">
              <input type="checkbox" class="settings__checkbox" data-high-contrast aria-label="High contrast" />
              <span>High contrast</span>
            </label>
            <p class="settings__help-text">Increase contrast for better visibility</p>
          </div>
          <div class="settings__control">
            <div class="settings__label"><span class="settings__label-text">Scrollbar style</span></div>
            <div class="settings__radio-group" role="radiogroup" aria-label="Scrollbar style">
              <label class="settings__radio-label">
                <input type="radio" name="scrollbar-style" value="thin" class="settings__radio" data-scrollbar-style aria-label="Thin scrollbar" checked />
                <span>Thin</span>
              </label>
              <label class="settings__radio-label">
                <input type="radio" name="scrollbar-style" value="thick" class="settings__radio" data-scrollbar-style aria-label="Thick scrollbar" />
                <span>Thick</span>
              </label>
              <label class="settings__radio-label">
                <input type="radio" name="scrollbar-style" value="hidden" class="settings__radio" data-scrollbar-style aria-label="Hidden scrollbars" />
                <span>Hidden</span>
              </label>
            </div>
            <p class="settings__help-text">Choose your preferred scrollbar appearance</p>
          </div>
        </section>
      </div>
    </div>
  </div>

  <main id="main-content" class="flex flex-col items-center justify-center text-center min-h-screen" style="padding: var(--spacing-12) var(--spacing-4); min-height: calc(100vh - 4rem);">
    <span class="badge badge--primary badge--sm mb-4">Vanilla JS + Rizzo CSS</span>
    <h1 style="font-size: clamp(2.5rem, 8vw, 4rem); font-weight: 800; line-height: 1.1; margin: 0 0 var(--spacing-4) 0; color: var(--text);">Build something great</h1>
    <p style="font-size: var(--font-size-xl); color: var(--text-dim); max-width: 42ch; margin: 0 0 var(--spacing-8) 0; line-height: var(--line-height-relaxed);">Same design system as Astro and Svelte — 14 themes, 24 components, full keyboard and screen reader support.</p>
    <div class="flex flex-wrap justify-center gap-4 mb-12">
      <a href="https://rizzo-css.vercel.app/docs/getting-started" class="btn btn-primary" target="_blank" rel="noopener noreferrer">Get started</a>
      <a href="https://rizzo-css.vercel.app/docs/components" class="btn btn-outline" target="_blank" rel="noopener noreferrer">Components</a>
      <button type="button" class="btn btn-outline" onclick="window.showToast && window.showToast('Hello from Rizzo!', { variant: 'success' });">Show toast</button>
    </div>
    <div class="flex flex-wrap justify-center gap-3 mb-16">
      <span class="badge badge--info">14 themes</span>
      <span class="badge badge--info">24 components</span>
      <span class="badge badge--info">WCAG AA</span>
    </div>
    <footer style="margin-top: auto; padding-top: var(--spacing-8); color: var(--text-dim); font-size: var(--font-size-sm);">
      <a href="https://rizzo-css.vercel.app" class="text-accent" style="color: var(--accent);">Rizzo CSS</a> — design system for the web
    </footer>
  </main>

  <script>
    (function() {
      var KEY = 'theme';
      var defaultDark = 'github-dark-classic';
      var defaultLight = 'github-light';
      function resolveSystem() {
        return window.matchMedia('(prefers-color-scheme: dark)').matches ? defaultDark : defaultLight;
      }
      function applyTheme(value) {
        var effective = value === 'system' ? resolveSystem() : value;
        document.documentElement.setAttribute('data-theme', effective);
        try { localStorage.setItem(KEY, value); } catch (e) {}
        var headerSelect = document.getElementById('theme-select');
        var settingsSelect = document.getElementById('settings-theme');
        if (headerSelect && headerSelect.value !== value) headerSelect.value = value;
        if (settingsSelect && settingsSelect.value !== value) settingsSelect.value = value;
        try { window.dispatchEvent(new CustomEvent('rizzo-theme-change', { detail: { themeValue: value, effective: effective } })); } catch (e) {}
      }
      function syncSelects() {
        var stored = null;
        try { stored = localStorage.getItem(KEY); } catch (e) {}
        var value = stored || 'system';
        var headerSelect = document.getElementById('theme-select');
        var settingsSelect = document.getElementById('settings-theme');
        if (headerSelect) headerSelect.value = value;
        if (settingsSelect) settingsSelect.value = value;
      }
      var headerSelect = document.getElementById('theme-select');
      var settingsSelect = document.getElementById('settings-theme');
      if (headerSelect) headerSelect.addEventListener('change', function() { applyTheme(headerSelect.value); });
      if (settingsSelect) settingsSelect.addEventListener('change', function() { applyTheme(settingsSelect.value); });
      syncSelects();
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function() {
        if ((localStorage.getItem(KEY) || 'system') === 'system') applyTheme('system');
      });
    })();
  </script>
  <script>
    (function initSettings() {
      var settings = document.querySelector('[data-settings]');
      if (!settings) return;
      var overlay = settings.querySelector('[data-settings-overlay]');
      var panel = settings.querySelector('.settings__panel');
      var closeBtn = settings.querySelector('[data-settings-close]');
      var fontSizeSlider = settings.querySelector('[data-font-size-slider]');
      var fontSizeValue = settings.querySelector('[data-font-size-value]');
      var reducedMotion = settings.querySelector('[data-reduced-motion]');
      var highContrast = settings.querySelector('[data-high-contrast]');
      var scrollbarStyleRadios = settings.querySelectorAll('[data-scrollbar-style]');
      var html = document.documentElement;
      if (!panel || !overlay || !closeBtn) return;
      function updateSliderProgress(slider) {
        var min = parseFloat(slider.min), max = parseFloat(slider.max), value = parseFloat(slider.value);
        slider.style.setProperty('--slider-progress', ((value - min) / (max - min)) * 100 + '%');
      }
      function applyFontSize(scale) {
        html.style.setProperty('--font-size-scale', scale);
        if (fontSizeValue) fontSizeValue.textContent = Math.round(scale * 100) + '%';
      }
      function applyScrollbarStyle(style) {
        html.classList.remove('scrollbar-thin', 'scrollbar-thick', 'scrollbar-hidden', 'hide-scrollbars');
        if (style === 'thick') html.classList.add('scrollbar-thick');
        else if (style === 'hidden') html.classList.add('scrollbar-hidden', 'hide-scrollbars');
      }
      function loadSettings() {
        var saved = localStorage.getItem('fontSizeScale');
        if (saved && fontSizeSlider) {
          fontSizeSlider.value = saved;
          applyFontSize(parseFloat(saved));
        }
        if (fontSizeSlider) updateSliderProgress(fontSizeSlider);
        if (reducedMotion) {
          reducedMotion.checked = localStorage.getItem('reducedMotion') === 'true';
          html.classList.toggle('reduced-motion', reducedMotion.checked);
        }
        if (highContrast) {
          highContrast.checked = localStorage.getItem('highContrast') === 'true';
          html.classList.toggle('high-contrast', highContrast.checked);
        }
        var scrollbar = localStorage.getItem('scrollbarStyle') || 'thin';
        for (var i = 0; i < scrollbarStyleRadios.length; i++) {
          if (scrollbarStyleRadios[i].value === scrollbar) scrollbarStyleRadios[i].checked = true;
        }
        applyScrollbarStyle(scrollbar);
      }
      function getFocusable(container) {
        var sel = 'button:not([disabled]),a[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),[tabindex]:not([tabindex="-1"])';
        return Array.prototype.slice.call(container.querySelectorAll(sel));
      }
      var previousActive = null;
      function openSettings() {
        previousActive = document.activeElement;
        settings.setAttribute('aria-hidden', 'false');
        overlay.setAttribute('aria-hidden', 'false');
        panel.setAttribute('aria-hidden', 'false');
        panel.removeAttribute('data-open');
        void panel.offsetHeight;
        requestAnimationFrame(function() {
          requestAnimationFrame(function() {
            panel.setAttribute('data-open', 'true');
            if (closeBtn) closeBtn.focus();
          });
        });
      }
      function closeSettings() {
        panel.removeAttribute('data-open');
        var duration = window.matchMedia('(prefers-reduced-motion: reduce)').matches ? 0 : 300;
        setTimeout(function() {
          settings.setAttribute('aria-hidden', 'true');
          overlay.setAttribute('aria-hidden', 'true');
          panel.setAttribute('aria-hidden', 'true');
          if (previousActive) {
            previousActive.focus();
            previousActive = null;
          }
        }, duration);
      }
      closeBtn.addEventListener('click', closeSettings);
      overlay.addEventListener('click', closeSettings);
      document.addEventListener('keydown', function(e) {
        if (panel.getAttribute('data-open') !== 'true') return;
        if (e.key === 'Escape') { e.preventDefault(); closeSettings(); return; }
        if (e.key === 'Tab') {
          var els = getFocusable(panel);
          if (els.length === 0) return;
          var first = els[0], last = els[els.length - 1], active = document.activeElement;
          if (e.shiftKey) {
            if (active === first || !panel.contains(active)) { e.preventDefault(); last.focus(); }
          } else {
            if (active === last || !panel.contains(active)) { e.preventDefault(); first.focus(); }
          }
        }
      });
      if (fontSizeSlider) {
        fontSizeSlider.addEventListener('input', function() {
          var scale = parseFloat(this.value);
          applyFontSize(scale);
          updateSliderProgress(this);
          localStorage.setItem('fontSizeScale', scale);
        });
      }
      if (reducedMotion) {
        reducedMotion.addEventListener('change', function() {
          html.classList.toggle('reduced-motion', this.checked);
          localStorage.setItem('reducedMotion', this.checked);
        });
      }
      if (highContrast) {
        highContrast.addEventListener('change', function() {
          html.classList.toggle('high-contrast', this.checked);
          localStorage.setItem('highContrast', this.checked);
        });
      }
      for (var j = 0; j < scrollbarStyleRadios.length; j++) {
        scrollbarStyleRadios[j].addEventListener('change', function() {
          if (this.checked) {
            applyScrollbarStyle(this.value);
            localStorage.setItem('scrollbarStyle', this.value);
          }
        });
      }
      loadSettings();
      window.openSettings = openSettings;
    })();
  </script>
</body>
</html>
